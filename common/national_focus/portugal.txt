### search_filters = {FOCUS_FILTER_POLITICAL}
### search_filters = {FOCUS_FILTER_RESEARCH}
### search_filters = {FOCUS_FILTER_INDUSTRY}
### search_filters = {FOCUS_FILTER_STABILITY}
### search_filters = {FOCUS_FILTER_WAR_SUPPORT}
### search_filters = {FOCUS_FILTER_MANPOWER}
### search_filters = {FOCUS_FILTER_ANNEXATION}

focus_tree = {
	id = portuguese_focus
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			tag = POR
			has_dlc = "La Resistance"
		}
	}

	default = no

	#shared_focus = IBERIAN_form_joint_alliance

	continuous_focus_position = { x = 50 y = 1500 }

	focus = {
		id = POR_colonial_assimilation_policy
		available = {
			any_owned_state = {
				NOT = { is_core_of = ROOT }
			}
		}

		bypass = {
		}

		icon = GFX_focus_generic_military_academy
		x = 2
		y = 0

		cost = 5
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			add_ideas = POR_colonial_assimilation_policy
		}
	}

	focus = {
		id = POR_embrace_jungle_warfare
		icon = GFX_focus_BRA_amazon_colonization
		prerequisite = { focus = POR_colonial_army }
		x = 0
		y = 1
		relative_position_id = POR_colonial_army

		cost = 5

		ai_will_do = {
			factor = 1
		}

		completion_reward = {
			add_doctrine_cost_reduction = {
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
			swap_ideas = {
				remove_idea = POR_colonial_army
				add_idea = POR_colonial_army_2
			}
		}
	}

	focus = {
		id = POR_luso_tropicalism
		available = {
			NOT = { has_government = fascism }
			OR = {
				has_full_control_of_state = 796 #North Angola
				has_full_control_of_state = 540 #Luanda
				has_full_control_of_state = 891 #South West Angola
				has_full_control_of_state = 892 #Zambesi
				has_full_control_of_state = 544 #Mozambique
				has_full_control_of_state = 896 #Manica e Sofala
				has_full_control_of_state = 897 #Zambezi√°-Mozambique
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				add = 1
				OR = {
					has_government = neutrality
					has_government = fascism
					has_government = communism
				}
			}
		}

		bypass = {		
		}
		prerequisite = { focus = POR_colonial_economy_revived }
		mutually_exclusive = { focus = POR_limited_self_rule }
			
		icon = GFX_focus_por_luso_tropicalism
		x = -1
		y = 1

		relative_position_id = POR_colonial_economy_revived
		cost = 5
		search_filters = {FOCUS_FILTER_ANNEXATION}
		completion_reward = {
			unlock_decision_tooltip = POR_mozambique_overseas_territory
			unlock_decision_tooltip = POR_angola_overseas_province
		}
	}

	focus = {
		id = POR_colonial_army
		available = {
			any_owned_state = {
				NOT = { is_core_of = ROOT }
			}
			has_completed_focus = POR_colonial_assimilation_policy
		}

		prerequisite = { focus = POR_army_reorganization }

		icon = GFX_focus_generic_little_entente
		x = 6
		y = 1

		relative_position_id = POR_army_reorganization
		cost = 10
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			army_experience	= 25
			add_ideas = POR_colonial_army
		}
	}

	focus = {
		id = POR_limited_self_rule
		available = {
			OR = {
				has_full_control_of_state = 796 #North Angola
				has_full_control_of_state = 540 #Luanda
				has_full_control_of_state = 891 #Zambesi
				has_full_control_of_state = 892 #Southwest Angola
				has_full_control_of_state = 544 #Mozambique
				has_full_control_of_state = 896 #Manica e Sofala
				has_full_control_of_state = 897 #Zambezia
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_government = fascism
					has_government = neutrality
				}			
			}
			modifier = {
				add = 1
				OR = {
					has_government = democratic
					any_country = {
						is_in_faction_with = ROOT
						is_faction_leader = yes
						has_government = democratic
					}
				}		
			}
		}

		bypass = {
		}
		prerequisite = { focus = POR_colonial_economy_revived }
		mutually_exclusive = { focus = POR_luso_tropicalism }
			
		icon = GFX_focus_por_limited_self_rule
		x = 1
		y = 1

		relative_position_id = POR_colonial_economy_revived
		cost = 5
		completion_reward = {
			add_political_power = 150
			add_manpower = 50000
			ANG = {
				if = {
					limit = { 
						POR = { has_full_control_of_state = 796 }
					}
					transfer_state = 796
					POR = { set_country_flag = POR_released_angola_flag }
				}
				if = {
					limit = { 
						POR = { has_full_control_of_state = 540 }
					}
					transfer_state = 540
					POR = { set_country_flag = POR_released_angola_flag }
				}
				if = {
					limit = { 
						POR = { has_full_control_of_state = 891 }
					}
					transfer_state = 891
					POR = { set_country_flag = POR_released_angola_flag }
				}	
				if = {
					limit = { 
						POR = { has_full_control_of_state = 892 }
					}
					transfer_state = 892
					POR = { set_country_flag = POR_released_angola_flag }
				}							
			}

			MZB = {
				if = {
					limit = { 
						POR = { has_full_control_of_state = 544 }
					}
					transfer_state = 544
					POR = { set_country_flag = POR_released_mozambique_flag }
				}	
				if = {
					limit = { 
						POR = { has_full_control_of_state = 896 }
					}
					transfer_state = 896
					POR = { set_country_flag = POR_released_mozambique_flag }
				}
				if = {
					limit = { 
						POR = { has_full_control_of_state = 897 }
					}
					transfer_state = 897
					POR = { set_country_flag = POR_released_mozambique_flag }
				}
			}

			if = {
				limit = {
					OR = {
						has_dlc = "Together for Victory"
						has_dlc = "Man the Guns"
					}
				}

				POR = {
					if = {
						limit = { has_country_flag = POR_released_angola_flag }
						set_autonomy = {
						    target = ANG
						    autonomy_state = autonomy_integrated_puppet
						}
					}
					if = {
						limit = { has_country_flag = POR_released_mozambique_flag }
						set_autonomy = {
						    target = MZB
						    autonomy_state = autonomy_integrated_puppet
						}
					}
				}
			}
			else = {
				if = {
					limit = { has_country_flag = POR_released_angola_flag }
					POR = { puppet = ANG }
				}
				if = {
					limit = { has_country_flag = POR_released_mozambique_flag }
					POR = { puppet = MZB }
				}
			}			

			every_other_country = {
				limit = { has_government = democratic }
				add_opinion_modifier = {
					target = POR
					modifier = democratic_leanings_good 
				}
			}

			if = {
				limit = {
					has_completed_focus = POR_allow_free_elections
				}
				custom_effect_tooltip = available_political_advisor
				show_ideas_tooltip = POR_francisco_da_cunha_leal
			}
		}
	}

	focus = {
		id = POR_colonial_economic_aid_plan
		prerequisite = { focus = POR_colonial_assimilation_policy }	
		prerequisite = { focus = POR_continue_the_public_works }
		available = {
			any_owned_state = {
				NOT = { is_core_of = ROOT }
			}
		}
		icon = GFX_focus_ARG_revive_the_colonial_plan
		x = 0
		y = 1
		relative_position_id = POR_colonial_assimilation_policy
		cost = 5
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			swap_ideas = {
			remove_idea = POR_colonial_assimilation_policy
			add_idea = POR_colonial_assimilation_policy_2
			}
		}
	}

	focus = {
		id = POR_develop_guinea
		available = {
			OR = {
				has_full_control_of_state = 296
				296 = {
					owner = { is_subject_of = ROOT }
				}
			}	
			
		}
		prerequisite = { focus = POR_colonial_economic_aid_plan }
				
		icon = GFX_focus_generic_africa_naval
		x = -2
		y = 1

		relative_position_id = POR_colonial_economic_aid_plan
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = { 
	# For state 702
   

    # For state 296
    if = {
        limit = {	
			OR = {
				has_full_control_of_state = 296
				296 = {
					owner = { is_subject_of = ROOT }
				}
			}	
        }
        296 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 2
					province = 12891			
					instant_build = yes
				}
				add_building_construction = {
					type = dockyard
					level = 1			
					instant_build = yes
				}
				add_resource = {
					type = rubber
					amount = 6
				}
			}
            }
             else = {
            add_manpower = 10000
            }
        }
	}

	focus = {
		id = POR_develop_timor
		available = {	
			OR = {
				has_full_control_of_state = 702
				702 = {
					owner = { is_subject_of = ROOT }
				}
			}					
		}
		prerequisite = { focus = POR_develop_guinea }	
			
		icon = GFX_focus_generic_africa_factory
		x = 0
		y = 1

		relative_position_id = POR_develop_guinea
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = { 
			702 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}

				add_building_construction = {
					type = naval_base
					level = 1
					province = 13014
					instant_build = yes
				}

			}
		}
	}

	focus = {
		id = POR_develop_trade_ports
		available = {	
			OR = {
			OR = {
				has_full_control_of_state = 729
				729 = {
					owner = { is_subject_of = ROOT }
				}
			}	
			OR = {
				has_full_control_of_state = 321
				321 = {
					owner = { is_subject_of = ROOT }
				}
			}	
			}				
		}
		prerequisite = { focus = POR_develop_timor }	

		icon = GFX_goal_generic_trade
		x = 0
		y = 1

		relative_position_id = POR_develop_timor
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {

    # For state 729
    if = {
        limit = {
            OR = {
				has_full_control_of_state = 729
				729 = {
					owner = { is_subject_of = ROOT }
				}
			}	
        }
        729 = {
            add_extra_state_shared_building_slots = 2

            add_building_construction = {
                type = naval_base
                level = 2
                province = 4189
                instant_build = yes
            }

			add_building_construction = {
                type = coastal_bunker
                level = 2
                province = 4189
                instant_build = yes
            }

			add_building_construction = {
                type = bunker
                level = 2
                province = 4189
                instant_build = yes
            }

            add_building_construction = {
                type = infrastructure
                level = 2
                instant_build = yes
            }

            add_building_construction = {
                type = industrial_complex
                level = 1
                instant_build = yes
            }
        }
    }
    else = {
        add_manpower = 10000
    }

    # For state 321
    if = {
        limit = {	
			OR = {
				has_full_control_of_state = 321
				321 = {
					owner = { is_subject_of = ROOT }
				}
			}	
        }
        321 = {
            add_extra_state_shared_building_slots = 2

            add_building_construction = {
                type = naval_base
                level = 2
                province = 1273
                instant_build = yes
            }

            add_building_construction = {
                type = infrastructure
                level = 2
                instant_build = yes
            }

			add_building_construction = {
                type = coastal_bunker
                level = 2
                province = 1273
                instant_build = yes
            }

			add_building_construction = {
                type = bunker
                level = 2
                province = 1273
                instant_build = yes
            }

            add_building_construction = {
                type = industrial_complex
                level = 1
                instant_build = yes
            }
            }
            }
             else = {
            add_manpower = 10000
            }
        }
	}

	focus = {
		id = POR_infrastructure_in_angola
		available = {
			OR = {
				has_full_control_of_state = 796
				796 = {
					owner = { is_subject_of = ROOT }
				}
			}
		}
		prerequisite = { focus = POR_colonial_economic_aid_plan }	
		icon = GFX_focus_generic_africa_infrastructure
		x = 2
		y = 1
		relative_position_id = POR_colonial_economic_aid_plan
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			
			796 = {		
				add_building_construction = {
					type = naval_base
					level = 2
					province = 2115
					instant_build = yes
				}	

				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}					
				add_extra_state_shared_building_slots = 2	
			}
					
		}
	}

	focus = {
		id = POR_develop_north_angola
		available = {	
			OR = {
				has_full_control_of_state = 796
				796 = {
					owner = { is_subject_of = ROOT }
				}
			}					
		}

		bypass = {		
		}
		prerequisite = { focus = POR_infrastructure_in_angola }	
			
		icon = GFX_focus_generic_africa_factory
		x = 0
		y = 1

		relative_position_id = POR_infrastructure_in_angola
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = { 
			540 = {		
				add_building_construction = {
					type = naval_base
					level = 2
					province = 8248
					instant_build = yes
				}	

				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}					
				add_extra_state_shared_building_slots = 2					
			}		
		}
	}

	focus = {
		id = POR_develop_south_angola
		available = {
			OR = {
				has_full_control_of_state = 892
				892 = {
					owner = { is_subject_of = ROOT }
				}
			}
		}
		prerequisite = { focus = POR_develop_north_angola }	
			
		icon = GFX_focus_generic_africa_production
		x = 0
		y = 1

		relative_position_id = POR_develop_north_angola
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = { 
			892 = {
				add_extra_state_shared_building_slots = 4
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}

				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}

				add_building_construction = {
					type = naval_base
					level = 2
					province = 8248
					instant_build = yes
				}

				add_resource = {
					type = steel
					amount = 6
				}

				add_resource = {
					type = rubber
					amount = 6
				}
			}
		}
	}

	focus = {
		id = POR_portuguese_oil
		available = {
			OR = {
				has_full_control_of_state = 796
				796 = {
					owner = { is_subject_of = ROOT }
				}
			}
			has_tech = synth_oil_experiments
		}

		prerequisite = { focus = POR_develop_north_angola }
		prerequisite = { focus = POR_extraction_industries }
				
		icon = GFX_goal_generic_oil_refinery
		x = 1
		y = 1

		relative_position_id = POR_develop_south_angola
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = { 
			796 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = synthetic_refinery
					level = 1
					instant_build = yes
				}
				add_resource = {
					type = oil
					amount = 16
				}
			}
		}
	}

	focus = {
		id = POR_develop_mozambique
		available = {
			OR = {
				has_full_control_of_state = 544
				544 = {
					owner = { is_subject_of = ROOT }
				}
			}
		}
		prerequisite = { focus = POR_colonial_economic_aid_plan }
				
		icon = GFX_focus_generic_africa_naval
		x = 0
		y = 1

		relative_position_id = POR_colonial_economic_aid_plan
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = { 
			544 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_resource = {
					type = aluminium
					amount = 6
				}
			}
			897 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = naval_base
					level = 3
					province = 2123				
					instant_build = yes
				}
				add_building_construction = {
					type = dockyard
					level = 1			
					instant_build = yes
				}
				add_resource = {
					type = aluminium
					amount = 3
				}
			}
		}
	}

	focus = {
		id = POR_develop_north_mozambique
		available = {	
			OR = {
				has_full_control_of_state = 897
				897 = {
					owner = { is_subject_of = ROOT }
				}
			}					
		}
		prerequisite = { focus = POR_develop_mozambique }	
			
		icon = GFX_focus_generic_africa_factory
		x = 0
		y = 1

		relative_position_id = POR_develop_mozambique
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = { 
			897 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}

				add_building_construction = {
					type = naval_base
					level = 2
					province = 2123
					instant_build = yes
				}

				add_resource = {
					type = aluminium
					amount = 3
				}
			}
		}
	}

	focus = {
		id = POR_develop_inner_mozambique
		available = {	
			OR = {
				has_full_control_of_state = 896
				896 = {
					owner = { is_subject_of = ROOT }
				}
			}					
		}
		prerequisite = { focus = POR_develop_north_mozambique }	
		icon = GFX_focus_generic_africa_production
		x = 0
		y = 1

		relative_position_id = POR_develop_north_mozambique
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = { 
			896 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
				add_resource = {
					type = rubber
					amount = 6
				}
			}
		}
	}

	focus = {
		id = POR_colonial_economy_revived
		prerequisite = { 
		focus = POR_develop_inner_mozambique
		focus = POR_develop_south_angola  
		focus = POR_develop_trade_ports
	    }
		available = {
			any_owned_state = {
				NOT = { is_core_of = ROOT }
			}
		}
		icon = GFX_focus_ETH_the_african_union
		x = 0
		y = 1
		relative_position_id = POR_develop_inner_mozambique
		cost = 10
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			swap_ideas = {
			remove_idea = POR_colonial_assimilation_policy_2
			add_idea = POR_colonial_assimilation_policy_3
			}
		}
	}

	focus = {
		id = POR_continue_the_public_works
		available = {
			OR = {
				has_full_control_of_state = 180 #PORTO
				has_full_control_of_state = 181 #GUARDA
				has_full_control_of_state = 795 #SANTAREM
				has_full_control_of_state = 179 #BEJA
				has_full_control_of_state = 112 #LISBON
			}
		}

		icon = GFX_focus_generic_road_investment
		x = 9
		y = 0

		relative_position_id = POR_colonial_assimilation_policy
		cost = 10
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {			
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = {
					add_extra_state_shared_building_slots = 1	
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}	
			
			if = {
				limit = { has_full_control_of_state = 181 }
				181 = {
					add_extra_state_shared_building_slots = 1	
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}

			if = {
				limit = { has_full_control_of_state = 795 }
				795 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}	
				}
			}

			if = {
				limit = { has_full_control_of_state = 179 }
				179 = {
					add_extra_state_shared_building_slots = 1	
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}

			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 1	
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}

					add_building_construction = {
						type = naval_base
						level = 2
						province = 11805					
						instant_build = yes
					}				
				}
			}

			add_ideas = POR_improved_production
		}
	}

	focus = {
		id = POR_instituto_superior_tecnico
		prerequisite = { focus = POR_continue_the_public_works }
		icon = GFX_focus_SWE_education_reform
		x = 0
		y = 1

		relative_position_id = POR_continue_the_public_works
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_research_slot = 1
			custom_effect_tooltip = political_advisor
			if = {
				limit = {
					amount_taken_ideas = {
						amount < 3
						slots = {
							political_advisor
						}
					}
				}
				add_ideas = POR_duarte_jose_pacheco
			}
		}
	}

	focus = {
		id = POR_ogme
		prerequisite = { focus = POR_instituto_superior_tecnico }
		icon = GFX_focus_SWE_lynx_armored_car
		x = -1
		y = 1

		relative_position_id = POR_instituto_superior_tecnico
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			add_tech_bonus = {
				name = POR_armor_focus
			    bonus = 1
			    uses = 1
			    category = armor
			}
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = POR_ogme_organization
				mio:POR_ogme_organization = {
					add_mio_size = 3
					add_mio_funds = 2500
				}
			}
		}
	}

	focus = {
		id = POR_modernising_infantry_equipement
		prerequisite = { focus = POR_instituto_superior_tecnico }
		icon = GFX_SOV_rehabilitated_military_ccp_2d_sov_compatibility
		x = -3		
		y = 1

		relative_position_id = POR_instituto_superior_tecnico
		cost = 5
		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = { 
			if = {
				limit = { has_full_control_of_state = 179 }
				179 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}	
			add_tech_bonus = {
				name = POR_metropolitan_army
			    bonus = 0.5
			    uses = 2
			    category = infantry_weapons
			}
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				show_mio_tooltip = POR_fabrica_material_guerra_organization
				mio:POR_fabrica_material_guerra_organization = {
					add_mio_size = 2
					add_mio_funds = 1500
				}
			}
			army_experience	= 50
		}
	}

	focus = {
		id = POR_ogma
		prerequisite = { focus = POR_instituto_superior_tecnico }
		icon = GFX_goal_generic_build_airforce
		x = 1
		y = 1

		relative_position_id = POR_instituto_superior_tecnico
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			add_tech_bonus = {
				name = POR_light_aircraft_focus
			    bonus = 1.0
			    uses = 1
			    category = light_air
			}
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = POR_ogma_organization
				mio:POR_ogma_organization = {
					add_mio_size = 3
					add_mio_funds = 2500
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = ogma
			}
		}
	}

	focus = {
		id = POR_modernising_support_equipement
		prerequisite = { focus = POR_instituto_superior_tecnico }
		icon = GFX_focus_AUS_raid_military_storages
		x = 3		
		y = 1
		relative_position_id = POR_instituto_superior_tecnico
		cost = 5
		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = { 
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}	
			add_tech_bonus = {
				name = POR_metropolitan_army
			    bonus = 0.5
			    uses = 2
			    category = support_tech
			}
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				show_mio_tooltip = POR_fabrica_material_guerra_organization
				mio:POR_fabrica_material_guerra_organization = {
					add_mio_size = 2
					add_mio_funds = 1500
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = fabrica_material_guerra
			}
			army_experience	= 50
		}
	}

focus = {
		id = POR_portuguese_companies
		prerequisite = { focus = POR_modernising_support_equipement
	focus = POR_ogma }
		icon = GFX_goal_generic_military_sphere
		x = 0		
		y = 1
		relative_position_id = POR_modernising_support_equipement
		cost = 10
		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = { 
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 2
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
			add_tech_bonus = {
				name = POR_metropolitan_army
			    bonus = 0.25
			    uses = 2
			    category = support_tech
			}
			army_experience	= 50
		}
	}

	focus = {
		id = POR_advanced_companies
		prerequisite = { focus = POR_portuguese_companies}
		prerequisite = { focus = POR_military_research_facilities}
		icon = GFX_focus_RAJ_a_private_military
		x = 0
		y = 2

		relative_position_id = POR_portuguese_companies
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = POR_advanced_companies
			    bonus = 0.5
			    uses = 2
			    category = support_tech
			}

			add_doctrine_cost_reduction = {
				name = POR_advanced_companies
			    cost_reduction = 0.5
			    uses = 2
			    category = land_doctrine
			    category = naval_doctrine
			    category = air_doctrine
			}
		}
	}

	focus = {
		id = POR_roads_bridges_and_dams
		available = {
			OR = {
				has_full_control_of_state = 181 #GUARDA
				has_full_control_of_state = 795 #SANTAREM
				has_full_control_of_state = 179 #BEJA
				has_full_control_of_state = 180 #PORTO
				has_full_control_of_state = 112 #LISBON
			}
		}
		prerequisite = { focus = POR_instituto_superior_tecnico }
		icon = GFX_goal_generic_construct_infrastructure
		x = -5
		y = 1

		relative_position_id = POR_instituto_superior_tecnico
		cost = 10
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 181 }
				181 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}

			if = {
				limit = { has_full_control_of_state = 795 }
				795 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}	
				}
			}

			if = {
				limit = { has_full_control_of_state = 179 }
				179 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}

			if = {
				limit = { has_full_control_of_state = 180 }
				180 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = naval_base
						level = 1
						province = 9817
						instant_build = yes
					}
				}
			}

			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}

					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = POR_extraction_industries
		available = {
			OR = {
				has_full_control_of_state = 112
				has_full_control_of_state = 795
			}
		}
		prerequisite = { focus = POR_roads_bridges_and_dams }
		icon = GFX_goal_generic_construction2
		x = 0
		y = 1

		relative_position_id = POR_roads_bridges_and_dams
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY  }
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 112 }
				unlock_decision_tooltip = POR_develop_lisbon_tungsten_deposits
			}
			if = {
				limit = { has_full_control_of_state = 795 }
				unlock_decision_tooltip = POR_develop_santarem_chromium_deposits
			}
			179 = {
				add_resource = {
					type = steel
					amount = 8
				}
			}
		
		}
	}

	focus = {
		id = POR_hydroelectricity
		available = {
			OR = {
				has_full_control_of_state = 180 #PORTO
				has_full_control_of_state = 181 #GUARDA
				has_full_control_of_state = 179 #BEJA
				has_full_control_of_state = 112 #LISBON
			}
		}
		prerequisite = { focus = POR_extraction_industries }
		icon = GFX_focus_BEL_dam_the_consequences
		x = 0
		y = 1

		relative_position_id = POR_extraction_industries
		cost = 10
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_ideas = POR_hydroelectric_power
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = {
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
				}
			}
			if = {
				limit = { has_full_control_of_state = 181 }
				181 = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
				}
			}
			if = {
				limit = { has_full_control_of_state = 179 }
				179 = {
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
				}
			}
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
					add_extra_state_shared_building_slots = 1
				}
			}
			if = {
				limit = { has_full_control_of_state = 181 }
				181 = {
					add_extra_state_shared_building_slots = 1	
					add_building_construction = {
						type = dam
						level = 1
						instant_build = yes
						province = {
							id = 11885
						}
					}
					custom_effect_tooltip = {
						localization_key = building_state_modifier|dam
						INDENT = "    " }
				}
			}
		}
	}

	focus = {
		id = POR_military_vehicles
		prerequisite = { focus = POR_ogme }

		icon = GFX_goal_generic_army_motorized
		x = 0
		y = 1

		relative_position_id = POR_ogme
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}
		completion_reward = {

			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			
			add_tech_bonus = {
				name = motorized_bonus
				ahead_reduction = 1
				bonus = 0.5
				category = motorized_equipment
			}
		}
	}

	focus = {
		id = POR_portuguese_artillery
		prerequisite = { focus = POR_ogme focus = POR_modernising_infantry_equipement }

		icon = GFX_goal_generic_army_artillery
		x = -2
		y = 1

		relative_position_id = POR_ogme
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 179 }
				179 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = HOL_daf_organization
				mio:HOL_daf_organization = {
					add_mio_funds = 500
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = fma
			}
			add_tech_bonus = {
				name = POR_portuguese_artillery
			    bonus = 0.5
			    uses = 2
			    category = artillery
			}
		}
	}

	focus = {
		id = POR_advanced_artillery
		prerequisite = { focus = POR_portuguese_artillery}
		prerequisite = { focus = POR_military_research_facilities}
		icon = GFX_goal_generic_army_artillery2
		x = 0
		y = 2

		relative_position_id = POR_portuguese_artillery
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = POR_advanced_artillery
			    bonus = 0.5
			    uses = 2
			    category = artillery
			}

			add_doctrine_cost_reduction = {
				name = POR_advanced_artillery
			    cost_reduction = 0.5
			    uses = 2
			    category = land_doctrine
			    category = naval_doctrine
			    category = air_doctrine
			}
		}
	}

	focus = {
		id = POR_military_research_facilities
		prerequisite = { focus = POR_military_vehicles focus = POR_portuguese_artillery 
		focus = POR_light_aircraft_focus focus = POR_portuguese_companies }
		icon = GFX_focus_generic_military_industry
		x = 1
		y = 1

		relative_position_id = POR_military_vehicles
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
		
			add_breakthrough_progress = {
				value = 0.25
				specialization = specialization_air
			}

			add_tech_bonus = {
				name = POR_naval_research_institute
			    bonus = 0.25
			    uses = 1
			    category = support_tech
			}
			add_tech_bonus = {
				name = POR_naval_research_institute
			    bonus = 0.25
			    uses = 1
			    category = air_equipment
			}
			
			air_experience = 50
			add_political_power = 50
			add_stability = 0.05
		}
	}

	focus = {
		id = POR_armor_focus
		prerequisite = { focus = POR_military_research_facilities }
		prerequisite = { focus = POR_military_vehicles }
		icon = GFX_goal_generic_army_tanks
		x = -1
		y = 1

		relative_position_id = POR_military_research_facilities
		cost = 10
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = arms_factory
						level = 2
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			add_tech_bonus = {
				name = POR_armor_focus
			    bonus = 1
			    uses = 1
			    category = armor
			}
			add_ideas = POR_armor_focus_idea
		}
	}

	focus = {
		id = POR_mechanized_focus
		prerequisite = { focus = POR_armor_focus}
		icon = GFX_focus_generic_mechanized
		x = -2
		y = 1

		relative_position_id = POR_armor_focus
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		available = {
			date > 1938.1.1
		}
		completion_reward = {
			add_tech_bonus = {
				name = POR_mechanized_focus
			    bonus = 1.0
			    uses = 2
			    category = cat_mechanized_equipment
			}
		}
	}

	focus = {
		id = POR_further_armor_developements
		prerequisite = { focus = POR_armor_focus}
		icon = GFX_focus_generic_tank_assembly
		x = 0
		y = 1

		relative_position_id = POR_armor_focus
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		available = {
			date > 1940.1.1
		}
		completion_reward = {
			army_experience = 50
			add_tech_bonus = {
				name = POR_further_armor_developements
			    bonus = 1.0
			    uses = 1
			    category = armor
			}
			add_breakthrough_progress = {
				value = 0.25
				specialization = specialization_land
			}
		}
	}

	focus = {
		id = POR_light_aircraft_focus
		prerequisite = { focus = POR_ogma }
		icon = GFX_focus_BRA_air_force
		x = 0
		y = 1

		relative_position_id = POR_ogma
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = arms_factory
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			

			add_tech_bonus = {
				name = POR_light_aircraft_focus
			    bonus = 0.25
			    uses = 3
			    category = light_air
			}
			air_experience = 25
		}
	}

	focus = {
		id = POR_advanced_light_aircraft
		prerequisite = { focus = POR_light_aircraft_focus }
		prerequisite = { focus = POR_military_research_facilities }
		icon = GFX_focus_generic_aircraft_production
		x = 1
		y = 1

		relative_position_id = POR_military_research_facilities
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			add_tech_bonus = {
				name = POR_advanced_light_aircraft
			    bonus = 1.0
			    uses = 1
			    category = air_equipment
			}
			add_ideas = POR_advanced_light_aircraft
			air_experience = 50
		}
	}

	focus = {
		id = POR_jet_research
		prerequisite = { focus = POR_advanced_light_aircraft }
		icon = GFX_focus_generic_jet_planes
		x = 0
		y = 1

		relative_position_id = POR_advanced_light_aircraft
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		available = {
			date > 1940.1.1
		}
		completion_reward = {
			air_experience = 50
			add_tech_bonus = {
				name = POR_jet_research
			    bonus = 1.0
			    uses = 2
			    category = jet_technology
			}
			add_breakthrough_progress = {
				value = 1
				specialization = specialization_air
			}
		}
	}

	focus = {
		id = POR_radar_research
		prerequisite = { focus = POR_advanced_light_aircraft }
		icon = GFX_goal_generic_radar
		x = 2
		y = 1
		relative_position_id = POR_advanced_light_aircraft
		cost = 5
		search_filters = {FOCUS_FILTER_RESEARCH}
		available = {
			date > 1938.1.1
		}
		completion_reward = {
			add_breakthrough_progress = {
				value = 0.5
				specialization = specialization_air
			}
			random_owned_controlled_state = {
					limit = {
						is_core_of = ROOT
						air_facility < 1
						land_facility < 1
						naval_facility < 1
						nuclear_facility < 1
					}
					prioritize = { 795 }
				has_full_control_of_state = 795
				add_building_construction = {
				state = 795
				type = air_facility
				level = 1
				province = 924
			    }
			}
			complete_special_project = sp:sp_air_radar
			add_tech_bonus = {
				name = POR_radar_research
				bonus = 0.5
				uses = 3
				category = radar_tech
			}
		}
	}

	focus = {
		id = POR_corporations_act
		prerequisite = { focus = POR_instituto_superior_tecnico }
		mutually_exclusive = { focus = POR_agricultural_reform_law}
		icon = GFX_focus_generic_modernize_industry
		x = 5
		y = 1
		relative_position_id = POR_instituto_superior_tecnico
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}

			if = {
				limit = { has_full_control_of_state = 179 }
				179 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			swap_ideas = {
				remove_idea =  POR_salazars_economic_struggle
				add_idea =  POR_salazars_economic_struggle_2
			}
			set_country_flag = USA_new_legislation_drafed_flag #Used to unlock the next focus
		}
	}

	focus = {
		id = POR_law_on_labour
		prerequisite = { focus = POR_corporations_act }
		icon = GFX_focus_GER_optimize_reich_labour_service
		x = 0
		y = 1

		relative_position_id = POR_corporations_act
		cost = 10
		search_filters = {FOCUS_FILTER_INDUSTRY}
		available = {
			has_country_flag = {
				flag = USA_new_legislation_drafed_flag
				days > 120
			}
			custom_trigger_tooltip = {
				tooltip = USA_legislation_drafted_days_tt
				has_country_flag = {
					flag = USA_new_legislation_drafed_flag
					days > 120
				}
			}
		}
		completion_reward = {
			add_ideas = POR_law_on_labour_idea
			custom_effect_tooltip = generic_skip_one_line_tt
			swap_ideas = {
				remove_idea =  POR_salazars_economic_struggle_2
				add_idea =  POR_salazars_economic_struggle_3
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			set_country_flag = USA_new_legislation_drafed_flag #Used to unlock the next focus
		}
	}
    focus = {
		id = POR_establish_portuguese_science_and_technology_affairs
		prerequisite = { focus = POR_law_on_labour }
		icon = GFX_focus_research2
		x = 0
		y = 1
		relative_position_id = POR_law_on_labour
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		available = {
			has_country_flag = {
				flag = USA_new_legislation_drafed_flag
				days > 120
			}
			custom_trigger_tooltip = {
				tooltip = USA_legislation_drafted_days_tt
				has_country_flag = {
					flag = USA_new_legislation_drafed_flag
					days > 120
				}
			}
		}
		completion_reward = {
				random_owned_controlled_state = {
					limit = {
						is_core_of = ROOT
						air_facility < 1
						land_facility < 1
						naval_facility < 1
						nuclear_facility < 1
					}
					prioritize = { 795 }
				has_full_control_of_state = 795
				add_building_construction = {
				state = 795
				type = air_facility
				level = 1
				province = 924
			    }
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			add_ideas = POR_science_and_technology_affairs
			custom_effect_tooltip = generic_skip_one_line_tt
			remove_ideas =  POR_salazars_economic_struggle_3
			set_country_flag = USA_new_legislation_drafed_flag #Used to unlock the next focus
		}
	}


	focus = {
		id = POR_agricultural_reform_law
		available = {
			OR = {
				has_full_control_of_state = 180
				has_full_control_of_state = 181
			}
		}
		prerequisite = { focus = POR_continue_the_public_works }
		mutually_exclusive = { focus = POR_corporations_act }
		icon = GFX_focus_generic_farmland
		x = 7
		y = 2

		relative_position_id = POR_continue_the_public_works
		cost = 10
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}

			if = {
				limit = { has_full_control_of_state = 181 }
				181 = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			swap_ideas = {
				remove_idea =  POR_salazars_economic_struggle
				add_idea =  POR_salazars_economic_struggle_2
			}
			set_country_flag = USA_new_legislation_drafed_flag #Used to unlock the next focus
		}
	}

	focus = {
		id = POR_cork_exports
		available = {
			has_country_flag = {
				flag = USA_new_legislation_drafed_flag
				days > 120
			}
			custom_trigger_tooltip = {
				tooltip = USA_legislation_drafted_days_tt
				has_country_flag = {
					flag = USA_new_legislation_drafed_flag
					days > 120
				}
			}
		}
		prerequisite = { focus = POR_agricultural_reform_law }
		icon = GFX_focus_PER_embrace_opulence
		x = 0
		y = 1
		relative_position_id = POR_agricultural_reform_law
		cost = 10
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_ideas = POR_cork_exports_idea
			custom_effect_tooltip = generic_skip_one_line_tt
			swap_ideas = {
				remove_idea =  POR_salazars_economic_struggle_2
				add_idea =  POR_salazars_economic_struggle_3
			}
			set_country_flag = USA_new_legislation_drafed_flag #Used to unlock the next focus
		}
	}

	focus = {
		id = POR_textile_industry
		available = {
		has_country_flag = {
				flag = USA_new_legislation_drafed_flag
				days > 120
			}
			custom_trigger_tooltip = {
				tooltip = USA_legislation_drafted_days_tt
				has_country_flag = {
					flag = USA_new_legislation_drafed_flag
					days > 120
				}
			}
		}
		prerequisite = { focus = POR_cork_exports }
		icon = GFX_focus_CHL_enlarge_the_textile_industries
		x = 0
		y = 1
		relative_position_id = POR_cork_exports
		cost = 10
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}

			if = {
				limit = { has_full_control_of_state = 795 }
				795 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex		
						level = 2
						instant_build = yes
					}
				}
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			remove_ideas = POR_salazars_economic_struggle_3
			set_country_flag = USA_new_legislation_drafed_flag #Used to unlock the next focus
		}
	}


	focus = {
		id = POR_addressing_the_unemployment
		prerequisite = { focus = POR_establish_portuguese_science_and_technology_affairs
		focus = POR_textile_industry }
		available = {
			num_of_factories > 24
			has_country_flag = {
				flag = USA_new_legislation_drafed_flag
				days > 120
			}
			custom_trigger_tooltip = {
				tooltip = USA_legislation_drafted_days_tt
				has_country_flag = {
					flag = USA_new_legislation_drafed_flag
					days > 120
				}
			}
		}
		icon = GFX_focus_generic_whispers
		x = 1
		y = 1
		relative_position_id = POR_establish_portuguese_science_and_technology_affairs
		cost = 10
		search_filters = {FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			add_ideas = POR_addressing_the_unemployment_idea
		}
	}


	focus = {
		id = POR_second_navy_reequipment
		available = {			
		}

		bypass = {		
		}
		prerequisite = {		
		}			
		icon = GFX_goal_generic_build_navy
		x = 17
		y = 0

		relative_position_id = POR_continue_the_public_works
		cost = 10
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = { 
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard		
						level = 2
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = dockyard
							size > 2
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = dockyard
						level = 2
						instant_build = yes
					}
				}
			}
			unlock_decision_tooltip = POR_buy_ships_britain
			unlock_decision_tooltip = POR_buy_ships_italy	
		}
	}

	focus = {
		id = POR_a_powerful_merchant_marine
		prerequisite = { focus = POR_second_navy_reequipment }
		icon = GFX_focus_generic_refit_civilian_ships
		x = -4
		y = 1
		relative_position_id = POR_second_navy_reequipment
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 179 }
				179 = { #Beja
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = dockyard
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = { #Porto
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = dockyard
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
			add_ideas = POR_convoy_build_efficiency
		}
	}

	focus = {
		id = POR_merchant_marine_protection
		prerequisite = { focus = POR_a_powerful_merchant_marine }
		icon = GFX_focus_generic_merchant_fleet
		x = 0
		y = 1

		relative_position_id = POR_a_powerful_merchant_marine
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = POR_merchant_marine_protection
			    bonus = 1.0
			    uses = 2
			    category = dd_tech
			}

			if = {
		    	limit = {
		    		has_dlc = "Man the Guns"
		    	}
		    	add_tech_bonus = {
		    		name = POR_merchant_marine_protection
				    bonus = 1.0
				    uses = 2
				    category = asw_tech
				}
		    }
		}
	}

	focus = {
		id = POR_submarine_effort
		prerequisite = { focus = POR_second_navy_reequipment }
		icon = GFX_goal_generic_navy_submarine
		x = -6
		y = 1
		relative_position_id = POR_second_navy_reequipment
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = POR_submarine_effort
			    cost_reduction = 1
			    uses = 2
			    category = naval_doctrine
			}
			add_tech_bonus = {
				name = POR_submarine_effort
			    bonus = 1.0
			    uses = 2
			    category = ss_tech
			}
		}
	}

	focus = {
		id = POR_intensify_torpedo_manufacturing
		icon = GFX_focus_generic_torpedo_production
		prerequisite = { focus = POR_submarine_effort }

		x = 0
		y = 1
		relative_position_id = POR_submarine_effort
		cost = 5
		available = {
		}

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {

			if = {
				limit = {
					has_dlc = "Man the Guns"
				}
				add_tech_bonus = {
					name = POR_intensify_torpedo_manufacturing
					bonus = 1
					uses = 3
					category = cat_torpedoes
				}
			}
			else = {
				add_doctrine_cost_reduction = {
					name = POR_intensify_torpedo_manufacturing
					cost_reduction = 1
					uses = 3
					category = naval_doctrine
				}
			}
		}
	}

	focus = {
		id = POR_under_the_sea_navy
		icon = GFX_focus_generic_midget_submarines
		prerequisite = { focus = POR_intensify_torpedo_manufacturing }
        mutually_exclusive = { focus = POR_over_the_sea_navy }
		x = 0
		y = 1
		relative_position_id = POR_intensify_torpedo_manufacturing
		cost = 5

		completion_reward = {
			add_ideas = POR_under_the_sea_navy_idea
		}
	}

	focus = {
		id = POR_special_submarines
		icon = GFX_focus_generic_cruiser_submarines
		prerequisite = { focus = POR_naval_research_institute }
		prerequisite = { focus = POR_under_the_sea_navy }
		x = -1
		y = 1
		relative_position_id = POR_naval_research_institute
		cost = 10
		available = {
		}

		completion_reward = {
			complete_special_project = sp:sp_naval_cruiser_submarine
			complete_special_project = sp:sp_naval_midget_submarine
			# AI will build the required docks for the next focus
			add_ai_strategy = {
				type = building_target
				id = dockyard
				value = 15
			}
		}
	}

	focus = {
		id = POR_over_the_sea_navy
		icon = GFX_goal_generic_occupy_states_coastal
		prerequisite = { focus = POR_merchant_marine_protection }
		mutually_exclusive = { focus = POR_under_the_sea_navy }
		x = 0
		y = 1
		relative_position_id = POR_merchant_marine_protection
		cost = 5
		available = {
		}

		completion_reward = {
			add_ideas = POR_over_the_sea_navy_idea
			# AI will build the required docks for the next focus
			add_ai_strategy = {
				type = building_target
				id = dockyard
				value = 15
			}
		}
	}

	focus = {
		id = POR_over_the_sea_navy_primacy
		icon = GFX_goal_generic_navy_cruiser
		prerequisite = { focus = POR_over_the_sea_navy }
		x = 1
		y = 1
		relative_position_id = POR_over_the_sea_navy
		cost = 5
		available = {
		}
		completion_reward = {
			swap_ideas = {
				remove_idea = POR_over_the_sea_navy_idea
				add_idea = POR_over_the_sea_navy_idea2
			}
		}
	}

	focus = {
		id = POR_special_battleships
		icon = GFX_focus_generic_navy_research_bonus
		prerequisite = { focus = POR_naval_research_institute }
		prerequisite = { focus = POR_over_the_sea_navy }
		x = 1
		y = 1
		relative_position_id = POR_naval_research_institute
		cost = 10
		available = {
		}
		completion_reward = {
			complete_special_project = sp:sp_naval_super_heavy_battleship
		}
	}

	focus = {
		id = POR_institute_mountaineer_corps
		prerequisite = { focus = POR_army_reorganization }
		mutually_exclusive = { 
		focus = POR_institute_marine_corps 
		focus = POR_institute_paratrooper_corps }
		icon = GFX_focus_GRE_a_land_of_mountains
		x = 5
		y = 1

		relative_position_id = POR_second_navy_reequipment
		cost = 5
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			
			add_tech_bonus = {
				name = POR_institute_mountaineer_corps
			    bonus = 1
			    uses = 1
			    category = mountaineers_tech
			}
		}
	}

	focus = {
		id = POR_iberian_elites
		prerequisite = { focus = POR_institute_mountaineer_corps }
		icon = GFX_focus_generic_free_iberia
		x = 0
		y = 1
		relative_position_id = POR_institute_mountaineer_corps
		cost = 5
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			if = {
				limit = { has_dlc = "Arms Against Tyranny" }
				add_doctrine_cost_reduction = {
					cost_reduction = 0.5
					uses = 1
					category = special_forces_doctrine
				}
			}
		add_ideas = POR_iberian_mountaineers
		}
	}

	focus = {
		id = POR_iberian_elites_special_training
		prerequisite = { focus = POR_iberian_elites }
		prerequisite = { focus = POR_expand_special_forces
	    focus = POR_regimento_de_comandos }
		icon = GFX_focus_SMB_special_forces_option_1
		x = 0
		y = 2
		relative_position_id = POR_iberian_elites
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			if = {
				limit = { has_dlc = "Arms Against Tyranny" }
				add_doctrine_cost_reduction = {
					cost_reduction = 0.5
					uses = 1
					category = special_forces_doctrine
				}
			}
		    swap_ideas = {
				remove_idea = POR_iberian_mountaineers
				add_idea = POR_iberian_mountaineers2
			}

			
		}
	}

	focus = {
		id = POR_iberian_elites_high_altitude_training
		prerequisite = { focus = POR_iberian_elites_special_training }
		icon = GFX_focus_AFG_mountain_training
		x = 0
		y = 1
		relative_position_id = POR_iberian_elites_special_training
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			if = {
				limit = { has_dlc = "Arms Against Tyranny" }
				
			}
		    swap_ideas = {
				remove_idea = POR_iberian_mountaineers2
				add_idea = POR_iberian_mountaineers3
			}
			add_unit_bonus = {
				mountaineers = {
					mountain = {
						attack = 0.05
						defence = 0.05
					}
				}
			}
			
		}
	}

	focus = {
		id = POR_naval_research_institute
		available = {
			num_of_naval_factories > 14
		}
		prerequisite = { focus = POR_over_the_sea_navy focus = POR_under_the_sea_navy }
		icon = GFX_focus_research
		x = -1
		y = 1

		relative_position_id = POR_over_the_sea_navy
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			# custom_effect_tooltip = POR_no_7th_research_slot_tt
			# if = {
			#	limit = { amount_research_slots = 6 }
			#	add_political_power = 50
			#	add_stability = 0.05
			# }
			# else = {
			#	add_research_slot = 1
			# }
			random_owned_controlled_state = {
					limit = {
						is_core_of = ROOT
						air_facility < 1
						land_facility < 1
						naval_facility < 1
						nuclear_facility < 1
					}
					prioritize = { 112 }
				has_full_control_of_state = 112
				add_building_construction = {
				state = 112
				type = naval_facility
				level = 1
				province = 11805
			}
			add_breakthrough_progress = {
				value = 1
				specialization = specialization_naval
			}
			}
			add_tech_bonus = {
				name = POR_naval_research_institute
			    bonus = 0.75
			    uses = 1
			    category = naval_artillery
			}
			add_doctrine_cost_reduction = {
				name = POR_naval_research_institute
			    bonus = 0.75
			    uses = 1
			    category = naval_doctrine
			}
			add_tech_bonus = {
				name = POR_naval_research_institute
			    bonus = 0.75
			    uses = 1
			    category = naval_equipment
			}
			navy_experience = 50
			add_political_power = 50
			add_stability = 0.05
		}
	}

	focus = {
		id = POR_air_naval_research
		prerequisite = { focus = POR_carrier_effort }
		available = {
			has_completed_focus = aircraft_production_focus
		}
		icon = GFX_goal_generic_air_naval_bomber
		x = 0
		y = 1

		relative_position_id = POR_carrier_effort
		cost = 5
		completion_reward = {
			navy_experience = 50
			air_experience = 50
			add_tech_bonus = {
				name = POR_advanced_light_aircraft
			    bonus = 1.0
			    uses = 2
			    category = air_equipment
			}
		}
	}

	focus = {
		id = POR_arsenal_do_alfeite
	
		prerequisite = { focus = POR_second_navy_reequipment }
		icon = GFX_focus_POL_develop_polish_shipbuilding
		x = 0
		y = 1

		relative_position_id = POR_second_navy_reequipment
		cost = 5
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 179 }
				179 = { #Beja
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = dockyard
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = { #Porto
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				random_owned_state = {
					limit = {
						is_controlled_by = ROOT
						is_core_of = ROOT
						free_building_slots = {
							building = dockyard
							size > 1
							include_locked = yes
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = dockyard
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = POR_national_cruiser_production
		prerequisite = { focus = POR_arsenal_do_alfeite }
		icon = GFX_goal_generic_construct_naval_dockyard
		x = 0
		y = 1

		relative_position_id = POR_arsenal_do_alfeite
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			
			add_tech_bonus = {
				name = POR_national_cruiser_production
			    bonus = 1.0
			    uses = 2
			    category = ca_tech
			}
			add_tech_bonus = {
				name = POR_national_cruiser_production
			    bonus = 1.0
			    uses = 2
			    category = cl_tech
			}
			add_tech_bonus = {
				name = POR_national_cruiser_production
			    bonus = 0.5
			    uses = 4
			    category = naval_artillery
			}
			navy_experience = 50
		}
	}

	focus = {
		id = POR_battleship_effort
		prerequisite = { focus = POR_national_cruiser_production }
		icon = GFX_focus_generic_navy_battleship2
		x = -1
		y = 1

		relative_position_id = POR_national_cruiser_production
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			
			add_tech_bonus = {
				name = POR_battleship_effort
			    bonus = 1.0
			    uses = 2
			    category = bb_tech
			}
			add_doctrine_cost_reduction = {
				name = POR_battleship_effort
			    cost_reduction = 0.5
			    uses = 2
			    category = naval_doctrine
			}
		}
	}

	focus = {
		id = POR_naval_armor_and_equipement_research
		prerequisite = { focus = POR_battleship_effort }
		icon = GFX_goal_generic_navy_battleship
		x = 0
		y = 1

		relative_position_id = POR_battleship_effort
		cost = 5
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_breakthrough_progress = {
				value = 1
				specialization = specialization_naval
			}
			add_tech_bonus = {
					name = naval_bonus
					bonus = 0.5
					uses = 3
					category = naval_armor
				}
			add_tech_bonus = {
					name = SPR_navy_modernization
					bonus = 0.5
					uses = 3
					technology = fire_control_methods_1
					technology = fire_control_methods_2
					technology = fire_control_methods_3
				}	
			add_tech_bonus = {
					name = POR_navy_modernization
					bonus = 1
					uses = 2
					category = naval_equipment
				}
														
		}
	}

	focus = {
		id = POR_carrier_effort
		prerequisite = { focus = POR_national_cruiser_production }
		icon = GFX_goal_generic_navy_carrier
		x = 1
		y = 1

		relative_position_id = POR_national_cruiser_production
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			
			add_tech_bonus = {
				name = POR_carrier_effort
			    bonus = 1
			    uses = 2
			    category = cv_tech
			}

			add_doctrine_cost_reduction = {
				name = POR_carrier_effort
			    cost_reduction = 0.5
			    uses = 2
			    category = naval_doctrine
			}
		}
	}

	focus = {
		id = POR_atlantic_defense_strategy
		available = {
			OR = {
				has_full_control_of_state = 698
				has_full_control_of_state = 697
				has_full_control_of_state = 702
			}
		}
		prerequisite = { focus = POR_national_cruiser_production }
		icon = GFX_focus_generic_destroyer
		x = 0
		y = 3

		relative_position_id = POR_national_cruiser_production
		cost = 5
		completion_reward = {
			add_ideas = POR_defence_of_the_atlantic
			if = {
				limit = { has_full_control_of_state = 698 }
				698 = { #Azores
					add_building_construction = {
						type = coastal_bunker
						level = 3
						province = 1751
						instant_build = yes
					}

					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
				}
			}

			if = {
				limit = { has_full_control_of_state = 697 }
				697 = { #Madeira
					add_building_construction = {
						type = coastal_bunker
						level = 3
						province = 3118
						instant_build = yes
					}

					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
				}
			}

			if = {
				limit = { has_full_control_of_state = 702 }
				702 = { #Cape Verde
					add_building_construction = {
						type = coastal_bunker
						level = 3
						province = 13014
						instant_build = yes
					}

					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = POR_endless_sea
		available = {
			OR = {
				has_full_control_of_state = 321
				has_full_control_of_state = 729
				has_full_control_of_state = 721
			}
		}
		prerequisite = { focus = POR_atlantic_defense_strategy }
		icon = GFX_focus_generic_coastal_fort
		x = 1
		y = 1

		relative_position_id = POR_atlantic_defense_strategy
		cost = 10
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_ideas = POR_endless_sea
 			if = {
				limit = { has_full_control_of_state = 321 }
	 			321 = { #Goa
					add_building_construction = {
						type = coastal_bunker
						level = 2
						province = 1273
						instant_build = yes
					}

					add_building_construction = {
						type = bunker
						level = 2
						province = 1273
						instant_build = yes
					}

					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 729 }
				729 = { #Macau
					add_building_construction = {
						type = coastal_bunker
						level = 2
						province = 4189
						instant_build = yes
					}

					add_building_construction = {
						type = bunker
						level = 2
						province = 4189
						instant_build = yes
					}

					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 721 }
				721 = { #Portuguese Timor
					add_building_construction = {
						type = coastal_bunker
						level = 2
						province = 12190
						instant_build = yes
					}

					add_building_construction = {
						type = bunker
						level = 2
						province = 12190
						instant_build = yes
					}

					add_building_construction = {
						type = air_base
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = POR_increased_repair_capabilities
		icon = GFX_goal_continuous_repairments
		prerequisite = { focus = POR_atlantic_defense_strategy }
		x = -1
		y = 1
		relative_position_id = POR_atlantic_defense_strategy

		cost = 10

		ai_will_do = {
			factor = 4
		}

		completion_reward = {
			random_owned_controlled_state = {
				prioritize = { 112 179 180 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				prioritize = { 112 179 180 }
				limit = {
					ROOT = { has_full_control_of_state = PREV }
					is_core_of = ROOT
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}			
			add_ideas = ENG_expand_the_repair_yards
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = POR_institute_paratrooper_corps
		prerequisite = { focus = POR_army_reorganization }
		mutually_exclusive = { 
		focus = POR_institute_marine_corps 
		focus = POR_institute_mountaineer_corps }
		icon = GFX_focus_generic_paratrooper
		x = 7
		y = 1

		relative_position_id = POR_second_navy_reequipment
		cost = 5

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = { 
			
			add_tech_bonus = {
				name = POR_tropas_paraquedistas
				bonus = 1
				uses = 1
				category = para_tech
			}
			add_tech_bonus = {
				name = POR_tropas_paraquedistas
				bonus = 1
				uses = 1
				category = transport_planes_cat
			}
		}
	}

	focus = {
		id = POR_tropas_paraquedistas
		prerequisite = { focus = POR_institute_paratrooper_corps }
		icon = GFX_focus_eng_special_air_service
		x = 0
		y = 1
		relative_position_id = POR_institute_paratrooper_corps
		cost = 5
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = { 
			if = {
				limit = { has_dlc = "Arms Against Tyranny" }
				add_doctrine_cost_reduction = {
					cost_reduction = 0.5
					uses = 1
					category = special_forces_doctrine
				}
			}
			add_ideas = POR_tropas_paraquedistas_idea
		}
	}

	focus = {
		id = POR_tropas_paraquedistas_paradropping_innovations
		icon = GFX_SOV_transpolar_flights_ccp_2d_sov_compatibility
		prerequisite = { focus = POR_tropas_paraquedistas }
		prerequisite = { focus = POR_regimento_de_comandos }
		icon = GFX_focus_PER_desert_training
		x = 0
		y = 2
		relative_position_id = POR_tropas_paraquedistas
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = { 
			if = {
				limit = { has_dlc = "Arms Against Tyranny" }
				add_doctrine_cost_reduction = {
					cost_reduction = 0.5
					uses = 1
					category = special_forces_doctrine
				}
			}
			swap_ideas = {
				remove_idea = POR_tropas_paraquedistas_idea
				add_idea = POR_tropas_paraquedistas_idea2
			}
		}
	}

	focus = {
		id = POR_tropas_paraquedistas_desert_training
		prerequisite = { focus = POR_tropas_paraquedistas_paradropping_innovations }
		icon = GFX_focus_PER_desert_training
		x = 0
		y = 1
		relative_position_id = POR_tropas_paraquedistas_paradropping_innovations
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = { 
			if = {
				limit = { has_dlc = "Arms Against Tyranny" }
				
			}
			swap_ideas = {
				remove_idea = POR_tropas_paraquedistas_idea2
				add_idea = POR_tropas_paraquedistas_idea3
			}
			add_unit_bonus = {
				paratrooper = {
					desert = {
						attack = 0.10
						defence = 0.10
					}
				}
			}
			
		}
	}

	focus = {
		id = POR_expand_special_forces
	
		prerequisite = { focus = POR_iberian_elites 
		focus = POR_fuzileiros 
	    focus = POR_tropas_paraquedistas }	
		icon = GFX_focus_SMB_special_forces_option_3
		x = -1
		y = 1

		relative_position_id = POR_iberian_elites
		cost = 5

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_ideas = special_forces
		}
	}

	focus = {
		id = POR_regimento_de_comandos
	
		prerequisite = { focus = POR_iberian_elites 
		focus = POR_fuzileiros 
	    focus = POR_tropas_paraquedistas }	
		icon = GFX_goal_generic_special_forces
		x = 1
		y = 1

		relative_position_id = POR_iberian_elites
		cost = 5

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_tech_bonus = {
				name = POR_regimento_de_comandos
				bonus = 1
				uses = 1
				technology = paratroopers2
				technology = paratroopers3
				technology = marines2
				technology = marines3
				technology = tech_mountaineers2
				technology = tech_mountaineers3
			}
		}
	}

	focus = {
		id = POR_institute_marine_corps
		prerequisite = { focus = POR_second_navy_reequipment }
		prerequisite = { focus = POR_army_reorganization }
		mutually_exclusive = { 
		focus = POR_institute_mountaineer_corps 
		focus = POR_institute_paratrooper_corps }
		icon = GFX_goal_generic_amphibious_assault
		x = 3
		y = 1

		relative_position_id = POR_second_navy_reequipment
		cost = 5
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = POR_fuzileiros
			    bonus = 1
			    uses = 1
			    category = marine_tech
			}
		}
	}

	focus = {
		id = POR_fuzileiros
		prerequisite = { focus = POR_institute_marine_corps }
		icon = GFX_focus_generic_naval_discipline
		x = 0
		y = 1
		relative_position_id = POR_institute_marine_corps
		cost = 5
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			if = {
				limit = { has_dlc = "Arms Against Tyranny" }
				add_doctrine_cost_reduction = {
					cost_reduction = 0.5
					uses = 1
					category = special_forces_doctrine
				}
			}
			add_ideas = POR_portuguese_marines
		}
	}

	focus = {
		id = POR_fuzileiros_special_training
		prerequisite = { focus = POR_fuzileiros }
		prerequisite = { focus = POR_expand_special_forces }
		icon = GFX_goal_generic_navy_doctrines_tactics
		x = 0
		y = 2
		relative_position_id = POR_fuzileiros
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			if = {
				limit = { has_dlc = "Arms Against Tyranny" }
				add_doctrine_cost_reduction = {
					cost_reduction = 0.5
					uses = 1
					category = special_forces_doctrine
				}
			}
			swap_ideas = {
				remove_idea = POR_portuguese_marines
				add_idea = POR_portuguese_marines2
			}
			add_unit_bonus = {
				marine = {
					marsh = {
						attack = 0.05
						defence = 0.05
					}
					river = {
						attack = 0.05
						defence = 0.05
					}
				}
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			add_unit_bonus = {
				
			
				marine_commando = {
					marsh = {
						attack = 0.05
						defence = 0.05
					}
					river = {
						attack = 0.05
						defence = 0.05
					}
				}
			}
		}
	}

	focus = {
		id = POR_fuzileiros_amphibious_training
		prerequisite = { focus = POR_fuzileiros_special_training }
		
		icon = GFX_focus_generic_naval_invasion
		x = 0
		y = 1
		relative_position_id = POR_fuzileiros_special_training
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			if = {
				limit = { has_dlc = "Arms Against Tyranny" }
				
			}
			swap_ideas = {
				remove_idea = POR_portuguese_marines2
				add_idea = POR_portuguese_marines3
			}
			
		}
	}

	focus = {
		id = POR_army_reorganization
		icon = GFX_focus_generic_combined_arms
		x = 10	
		y = 0
		relative_position_id = POR_second_navy_reequipment
		cost = 10
		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = { 	
			remove_ideas = POR_unreliable_army
			army_experience	= 50
		}
	}

	focus = {
		id = POR_metropolitan_army
		prerequisite = { focus = POR_army_reorganization }
		icon = GFX_focus_generic_advanced_military_studies
		x = 4		
		y = 1

		relative_position_id = POR_army_reorganization
		cost = 5
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = { 	
			army_experience	= 25
			add_tech_bonus = {
				name = POR_metropolitan_army
			    bonus = 0.5
			    uses = 1
			    category = infantry_weapons
				category = armor
				category = artillery
			}
		}
	}

	focus = {
		id = POR_standardization
		prerequisite = { focus = POR_metropolitan_army }
		available = {
			has_completed_focus = POR_continue_the_public_works
		}
		icon = GFX_focus_generic_mass_production
		x = 0		
		y = 1

		relative_position_id = POR_metropolitan_army
		cost = 5
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = { 	
			swap_ideas = {
				remove_idea = POR_improved_production
				add_idea = POR_standardization
			}
		}
	}

	focus = {
		id = POR_under_the_sea_navy
		icon = GFX_focus_generic_midget_submarines
		prerequisite = { focus = POR_intensify_torpedo_manufacturing }
        mutually_exclusive = { focus = POR_over_the_sea_navy }
		x = 0
		y = 1
		relative_position_id = POR_intensify_torpedo_manufacturing
		cost = 5

		completion_reward = {
			add_ideas = POR_under_the_sea_navy_idea
		}
	}

	focus = {
		id = POR_under_the_sea_navy_primacy
		icon = GFX_goal_generic_navy_anti_submarine
		prerequisite = { focus = POR_under_the_sea_navy }
		x = -1
		y = 1
		relative_position_id = POR_under_the_sea_navy
		cost = 5

		completion_reward = {
			swap_ideas = {
				remove_idea = POR_under_the_sea_navy_idea
				add_idea = POR_under_the_sea_navy_idea2
			} 
		}
	}

	focus = {
		id = POR_special_submarines
		icon = GFX_focus_generic_cruiser_submarines
		prerequisite = { focus = POR_naval_research_institute }
		prerequisite = { focus = POR_under_the_sea_navy }
		x = -1
		y = 1
		relative_position_id = POR_naval_research_institute
		cost = 10
		completion_reward = {
			complete_special_project = sp:sp_naval_cruiser_submarine
			complete_special_project = sp:sp_naval_midget_submarine
			# AI will build the required docks for the next focus
			add_ai_strategy = {
				type = building_target
				id = dockyard
				value = 15
			}
		}
	}

	focus = {
		id = POR_metropolitan_army_primacy
		icon = GFX_focus_generic_full_social_mobilization
		prerequisite = { focus = POR_standardization }
		mutually_exclusive = { focus = POR_colonial_army_primacy }
		x = 0
		y = 1
		relative_position_id = POR_standardization
		cost = 10
		available = {
			any_owned_state = {
				is_core_of = ROOT
			}
		}

		completion_reward = {
				add_ideas = POR_metropolitan_army_primacy_idea
			# AI will build the required mils for the next focus
			add_ai_strategy = {
				type = building_target
				id = arms_factory
				value = 15
			}
		}
	}

	focus = {
		id = POR_metropolitan_army_dominance
		icon = GFX_focus_ITA_banda_carita
		prerequisite = { focus = POR_metropolitan_army_primacy }
		x = -1
		y = 1
		relative_position_id = POR_metropolitan_army_primacy
		cost = 5
		available = {
			any_owned_state = {
				is_core_of = ROOT
			}
		}
		completion_reward = {
			swap_ideas = {
				remove_idea = POR_metropolitan_army_primacy_idea
				add_idea = POR_metropolitan_army_dominance_idea
			}
		}
	}

	focus = {
		id = POR_special_military_vehicles
		icon = GFX_focus_generic_tank_production
		prerequisite = { focus = POR_army_research_institute }
		prerequisite = { focus = POR_metropolitan_army_primacy }
		x = -1
		y = 1
		relative_position_id = POR_army_research_institute
		cost = 10
		completion_reward = {
			complete_special_project = sp:sp_land_military_engineering_vehicles
			complete_special_project = sp:sp_land_flamethrower_tank
		}
	}

	focus = {
		id = POR_colonial_army_primacy
		icon = GFX_focus_CONGO_congo_army
		prerequisite = { focus = POR_embrace_jungle_warfare }
		mutually_exclusive = { focus = POR_metrolopitan_army_primacy }
		x = 0
		y = 1
		relative_position_id = POR_embrace_jungle_warfare
		cost = 10
		available = {
			any_owned_state = {
				NOT = { is_core_of = ROOT }
			}
		}
		completion_reward = {
			swap_ideas = {
				remove_idea = POR_colonial_army_2
				add_idea = POR_colonial_army_primacy_idea
			}
			# AI will build the required mils for the next focus
			add_ai_strategy = {
				type = building_target
				id = arms_factory
				value = 15
			}
		}
	}

	focus = {
		id = POR_colonial_army_dominance
		icon = GFX_focus_IRQ_royal_iraqi_army_alt
		prerequisite = {
		focus = POR_colonial_army_primacy }
		x = 1
		y = 1
		relative_position_id = POR_colonial_army_primacy
		cost = 5
		available = {
			any_owned_state = {
				NOT = { is_core_of = ROOT }
			}
		}
		completion_reward = {
			swap_ideas = {
				remove_idea = POR_colonial_army_primacy_idea
				add_idea = POR_colonial_army_dominance_idea
			}
		}
	}

	focus = {
		id = POR_army_research_institute
		available = {
			num_of_military_factories > 14
		}
		prerequisite = { focus = POR_metropolitan_army_primacy 
		focus = POR_colonial_army_primacy }
		icon = GFX_focus_research
		x = 1
		y = 1
		relative_position_id = POR_metropolitan_army_primacy 
		cost = 10
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			# custom_effect_tooltip = POR_no_7th_research_slot_tt
			# if = {
			#	limit = { amount_research_slots = 6 }
			#	add_political_power = 50
			#	add_stability = 0.05
			# }
			# else = {
			#	add_research_slot = 1
			# }
			random_owned_controlled_state = {
					limit = {
						is_core_of = ROOT
						air_facility < 1
						land_facility < 1
						naval_facility < 1
						nuclear_facility < 1
					}
					prioritize = { 181 }
				has_full_control_of_state = 181 
				add_building_construction = {
				state = 181
				type = land_facility
				level = 1
				province = 6996
			}
			add_breakthrough_progress = {
				value = 1
				specialization = specialization_land
			}
			}
			add_tech_bonus = {
				name = POR_army_research_institute
			    bonus = 0.5
			    uses = 1
			    category = infantry_weapons
			}
			add_tech_bonus = {
				name = POR_army_research_institute
			    bonus = 0.5
			    uses = 1
			    category = artillery
			}
			add_tech_bonus = {
				name = POR_army_research_institute
			    bonus = 0.5
			    uses = 1
			    category = armor
			}
			
			army_experience = 50
			add_political_power = 50
			add_stability = 0.05
		}
	}

	focus = {
		id = POR_colonial_army_tactics
		icon = GFX_focus_AFG_contact_amanullah_loyalists_alt
		prerequisite = { focus = POR_army_research_institute }
		prerequisite = { focus = POR_colonial_army_primacy }
		x = 1
		y = 1
		relative_position_id = POR_army_research_institute
		cost = 10
		completion_reward = {
			complete_special_project = sp:sp_land_super_heavy_howitzer
		}
	}

	focus = {
		id = POR_corpo_do_estado_maior
		available = {			
		}

		bypass = {		
		}
		prerequisite = { focus = POR_army_reorganization }
		icon = GFX_goal_generic_army_doctrines
		x = -1		
		y = 1

		relative_position_id = POR_army_reorganization
		cost = 5
		completion_reward = { 
			army_experience = 25
			add_political_power = 50
			add_ideas = POR_corpo_do_estado_maior
		}
	}

	focus = {
		id = POR_staff_wargames
		available = {			
		}

		bypass = {		
		}
		prerequisite = { focus = POR_army_reorganization }
		icon = GFX_focus_generic_license_production
		x = 1		
		y = 1

		relative_position_id = POR_army_reorganization
		cost = 5
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = { 
			army_experience = 25
			add_political_power = 50
			add_doctrine_cost_reduction = {
				name = POR_staff_wargames
			    cost_reduction = 0.5
			    uses = 2
			    category = land_doctrine
			}
		}
	}

	focus = {
		id = POR_fortification_focus
		available = {	
		}
		prerequisite = { focus = POR_staff_wargames }
		prerequisite = { focus = POR_corpo_do_estado_maior }	
		icon = GFX_goal_fortify_the_westwall 
		x = -1
		y = 1

		relative_position_id = POR_staff_wargames
		cost = 10

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = { 
			add_stability = 0.05
			army_experience = 25
			add_ideas = POR_fortification_focus_idea
			add_doctrine_cost_reduction = {
				name = POR_field_maneuvers
			    cost_reduction = 0.5
			    uses = 2
			    category = land_doctrine
			}
		}
	}

	focus = {
		id = POR_defend_the_borders
		available = {
			OR = {
				has_full_control_of_state = 181
				has_full_control_of_state = 180
				has_full_control_of_state = 179
				has_full_control_of_state = 795
			}			
		}

		bypass = {		
		}
		prerequisite = { focus = POR_fortification_focus } 
		icon = GFX_focus_generic_provoke_border_clashes
		x = -1		
		y = 1
		relative_position_id = POR_fortification_focus
		cost = 5
		completion_reward = { 
		#Add fort to all starting core provinces bordering another country
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = { #Lisbon
					add_building_construction = {
					    type = bunker
					    province = {
					        all_provinces = yes
					        limit_to_border = yes
					    }
					    level = 3
					    instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = { #Porto
					add_building_construction = {
					    type = bunker
					    level = 3
					    instant_build = yes
					    province = {
					        all_provinces = yes
					        limit_to_border = yes
					    }
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 179 }
				179 = { #Beja
					add_building_construction = {
					    type = bunker
					    level = 3
					    instant_build = yes
					    province = {
					        all_provinces = yes
					        limit_to_border = yes
					    }
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 181 }
				181 = { #Guarda
					add_building_construction = {
					    type = bunker
					    level = 3
					    instant_build = yes
					    province = {
					        all_provinces = yes
					        limit_to_border = yes
					    }
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 795 }
				795 = { #Santarem
					add_building_construction = {
					    type = bunker
					    level = 3
					    instant_build = yes
					    province = {
					        all_provinces = yes
					        limit_to_border = yes
					    }
					}
				}
			}
		}
	}

	focus = {
		id = POR_border_defence_networks
		available = {
			has_built = {
				type = land_facility
				value = 1
			}		
		}
		prerequisite = { focus = POR_defend_the_borders } 
		icon = GFX_goal_generic_fortify_city
		x = 0		
		y = 1
		relative_position_id = POR_defend_the_borders
		cost = 5
		completion_reward = { 
			complete_special_project = sp:sp_land_stronghold_network
		}
	}


	focus = {
		id = POR_rebuild_the_lines_of_torres_vedras
		available = {
			has_full_control_of_state = 112
				has_full_control_of_state = 180
				has_full_control_of_state = 179		
		}

		bypass = {		
		}
		prerequisite = { focus = POR_fortification_focus }
		icon = GFX_focus_generic_coastal_fort
		x = 1		
		y = 1

		relative_position_id = POR_fortification_focus
		cost = 5
		completion_reward = { 
		#Add coastal fort to each port
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = { #Lisbon
					add_building_construction = {
						type = coastal_bunker
						province = {
							all_provinces = yes
							limit_to_naval_base = yes
						}
						level = 3
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = { #Porto
					add_building_construction = {
						type = coastal_bunker
						province = {
							all_provinces = yes
							limit_to_naval_base = yes
						}
						level = 3
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 179 }
				179 = { #Beja
					add_building_construction = {
						type = coastal_bunker
						province = {
							all_provinces = yes
							limit_to_naval_base = yes
						}
						level = 3
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 181 }
				181 = { #Guarda
					add_building_construction = {
						type = coastal_bunker
						province = {
							all_provinces = yes
							limit_to_naval_base = yes
						}
						level = 3
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 795 }
				795 = { #Santarem
					add_building_construction = {
						type = coastal_bunker
						province = {
							all_provinces = yes
							limit_to_naval_base = yes
						}
						level = 3
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = POR_elastic_defence
		prerequisite = { focus = POR_rebuild_the_lines_of_torres_vedras }
		icon = GFX_goal_generic_defence
		x = 0		
		y = 1

		relative_position_id = POR_rebuild_the_lines_of_torres_vedras
		cost = 5
		completion_reward = { 
			swap_ideas = {
				remove_idea = POR_fortification_focus_idea
				add_idea = POR_elastic_defence_idea
			}
		}
	}

	

	focus = {
		id = POR_field_maneuvers
		available = {	
		}
		prerequisite = { focus = POR_military_affairs_commission }	
		icon = GFX_focus_generic_manpower
		x = -1
		y = 1

		relative_position_id = POR_military_affairs_commission
		cost = 5

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = { 
			add_war_support = 0.05
			add_manpower = 50000
			add_doctrine_cost_reduction = {
				name = POR_field_maneuvers
			    cost_reduction = 0.5
			    uses = 2
			    category = land_doctrine
			}
		}
	}

	focus = {
		id = POR_military_affairs_commission
		icon = GFX_focus_secret_rearmament
		prerequisite = { focus = POR_fortification_focus }
		x = 0
		y = 3

		relative_position_id = POR_fortification_focus
		cost = 10

		ai_will_do = {
			factor = 2
		}

		completion_reward = {
			add_stability = 0.05
			army_experience = 25
			add_doctrine_cost_reduction = {
				name = POR_staff_wargames
			    cost_reduction = 0.5
			    uses = 2
			    category = land_doctrine
			}
		}
	}

	focus = {
		id = POR_general_staff_focus
		prerequisite = { focus = POR_military_affairs_commission }	
		icon = GFX_focus_CONGO_congolese_generals
		x = 1
		y = 1
		relative_position_id = POR_military_affairs_commission
		cost = 5

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = { 
			add_war_support = 0.05
			add_ideas = general_staff
		}
	}

	focus = {
		id = POR_popular_front
		mutually_exclusive = { focus = POR_estado_novo}
		prerequisite = {
		}
		icon = GFX_focus_PER_strengthen_the_tudeh
		x = 17
		y = 0
		allow_branch = {
			NOT = {
				has_completed_focus = POR_estado_novo
			}
		}
		relative_position_id = POR_army_reorganization
		cost = 10
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			mark_focus_tree_layout_dirty = yes
			set_party_name = {
			    ideology = communism
			    long_name = POR_communism2_party_long
			    name = POR_communism2_party
			}

			add_popularity = {
			    ideology = communism
			    popularity = 0.05
			}
			add_popularity = {
			    ideology = democratic
			    popularity = 0.05
			}
				
			add_political_power = 100
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_maria_lamas
			custom_effect_tooltip = remove_political_advisor
			show_ideas_tooltip = POR_fernando_dos_santos_costa
			show_ideas_tooltip = POR_jose_adriano_pequito_rebelo
			custom_effect_tooltip = remove_chief_of_army
			show_ideas_tooltip = POR_rolao_preto
		}
	}

	focus = {
		id = POR_nation_in_arms
		prerequisite = { focus = POR_popular_front }
		icon = GFX_focus_generic_attack_portugal
		x = -5
		y = 1

		relative_position_id = POR_popular_front
		cost = 10
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_MANPOWER}
		completion_reward = {
			add_popularity = {
			    ideology = communism
			    popularity = 0.1
			}
			add_war_support = 0.1
			add_ideas = POR_nation_in_arms
		}
	}

	focus = {
		id = POR_unify_leftist_youth_wings
		prerequisite = { focus = POR_nation_in_arms }
		icon = GFX_goal_generic_war_with_comintern
		x = -1
		y = 1

		relative_position_id = POR_nation_in_arms
		cost = 5
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			add_popularity = {
			    ideology = communism
			    popularity = 0.1
			}
			add_ideas = POR_unified_youth_wings
		}
	}

	focus = {
		id = POR_nationalize_industry
		available = {
			OR = {
				has_full_control_of_state = 112
				has_full_control_of_state = 180
				has_full_control_of_state = 181
				has_full_control_of_state = 795
			}
		}

		bypass = {
			NOT = { has_full_control_of_state = 112 }
			NOT = { has_full_control_of_state = 180 }
			NOT = { has_full_control_of_state = 181 }
			NOT = { has_full_control_of_state = 795 }
		}
		prerequisite = { focus = POR_nation_in_arms }
		icon = GFX_goal_generic_soviet_construction
		x = 1
		y = 1

		relative_position_id = POR_nation_in_arms
		cost = 10
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = { #Lisbon
					add_extra_state_shared_building_slots = 4
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = { #Porto
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 181 }
				181 = { #Guarda
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 795 }
				795 = { #Santarem
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			add_stability = -0.10
		}
	}

	focus = {
		id = POR_reorganization_of_the_communist_party
		available = {
			communism > 0.4
			NOT = {
				has_completed_focus = POR_allow_free_elections
			}
		}
		prerequisite = { focus = POR_nationalize_industry }
		prerequisite = { focus = POR_unify_leftist_youth_wings }
		icon = GFX_focus_generic_soviet_politics
		x = -1
		y = 1
		relative_position_id = POR_nationalize_industry
		cost = 10
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY}
		completion_reward = {
			SOV = {
				if = {
					limit = { has_government = communism }
					add_opinion_modifier = {
					    target = POR
					    modifier = POR_neutrality_opinion_communism
					}
				}
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_bento_de_jesus_caraca
			remove_ideas = POR_unstable_republic
			if = {
				limit = {
					NOT = { has_government = communism }
				}
				set_politics = {
					ruling_party = communism
				}

				if = { #Low Stability triggers a Civil War
					limit = {
						has_stability < 0.4
					}
					set_temp_variable = { POR_communist_cw_opposition = party_popularity@neutrality }
					multiply_temp_variable = { POR_communist_cw_opposition = 0.8 }
					add_to_temp_variable = { POR_communist_cw_opposition = party_popularity@democratic }
					add_to_temp_variable = { POR_communist_cw_opposition = party_popularity@fascism }
					start_civil_war = {
						ideology = neutrality
						size = POR_communist_cw_opposition
						capital = 180
						states = { 181 }
					}
					if = {
						limit = {
							OR = {
								540 = {
									is_core_of = POR
								}
								544 = {
									is_core_of = POR
								}							
							}
						}
						add_ideas = POR_civil_war_surrender_debuff
					}					
				}
				else = {
					add_stability = -0.1
				}
				custom_effect_tooltip = POR_potential_civil_war_low_requirement_tt
			}
			else = {
				add_political_power = 120
				add_popularity = {
				    ideology = communism
				    popularity = 0.05
				}
			}
		}
	}

	focus = {
		id = POR_communist_secret_police
		icon = GFX_focus_SOV_military_purge
		cost = 5
		prerequisite = {
			focus = POR_reorganization_of_the_communist_party
		}
		available = {

		}
		relative_position_id = POR_reorganization_of_the_communist_party
		x = -2
		y = 1
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			if = {
				limit = {
					has_dlc = "La Resistance"
					has_intelligence_agency = yes
					NOT = {
						has_done_agency_upgrade = upgrade_interrogation_techniques
					}
				}
				upgrade_intelligence_agency = upgrade_interrogation_techniques
			}
			else_if = {
				limit = {
					has_dlc = "La Resistance"
					NOT = {
						has_intelligence_agency = yes
					}
				}
				create_intelligence_agency = yes
			}
						
			add_tech_bonus = {
				name = mp_tech_bonus_name
				bonus = 1
				uses = 2
				category = military_police_tech
			}
			
			if = {
				limit = {
					NOT = {
						has_idea = r56i_laws_security_balanced
						has_idea = r56i_laws_security_rights
						has_idea = r56i_laws_security_order
					}
				}
				custom_effect_tooltip = POR_add_secret_police_tt
				hidden_effect = {
					add_ideas = sassy_secret_police
				}
				
			}
		}
		search_filters = {  FOCUS_FILTER_RESEARCH  }
	}

	focus = {
		id = POR_expand_the_intelligence_services
		icon = GFX_focus_AFG_work_with_german_inteligence
		cost = 5
		prerequisite = {
			focus = POR_communist_secret_police
		}
		available = {
			has_intelligence_agency = yes
			agency_upgrade_number > 4
		}
		relative_position_id = POR_communist_secret_police
		x = 0
		y = 2
		ai_will_do = {
			factor = 10
		}
		completion_reward = {
			add_ideas = POR_special_operations
		}
		search_filters = {   }
	}

	focus = {
		id = POR_join_the_comintern
		available = {
			SOV = { is_faction_leader = yes }
			NOT = { has_war_with = SOV }
			has_government = communism
		}

		bypass = {
			is_in_faction_with = SOV
		}
		prerequisite = { focus = POR_reorganization_of_the_communist_party }
		mutually_exclusive = { focus = POR_the_popular_front_bloc focus = POR_align_against_the_comintern }
		icon = GFX_focus_SOV_socialism_in_one_country
		x = 0
		y = 3

		relative_position_id = POR_nation_in_arms
		cost = 5
		completion_reward = {
			SOV = {
				country_event = { id = generic.2 hours = 4 }
			}		
		}
	}

	focus = {
		id = POR_research_collaboration
		available = {
			is_in_faction_with = SOV
		}
		prerequisite = { focus = POR_join_the_comintern }
		icon = GFX_focus_generic_socialist_science
		x = -1
		y = 1

		relative_position_id = POR_join_the_comintern
		cost = 5
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			SOV = { add_to_tech_sharing_group = comintern_research }
			add_to_tech_sharing_group = comintern_research
			add_ideas = POR_soviet_research_grants
		}
	}

	focus = {
		id = POR_cooperate_with_french_militants
		available = {
			any_other_country = {
				has_government = fascism
				has_war_with = FRA
			}
		}

		bypass = {
			NOT = {
				any_other_country = {
					has_government = fascism
					has_war_with = FRA
				}
			}
		}
		prerequisite = { focus = POR_join_the_comintern  focus = POR_the_popular_front_bloc focus = POR_align_against_the_comintern}
		icon = GFX_focus_chi_reach_out_to_france
		x = 1
		y = 1

		relative_position_id = POR_join_the_comintern
		cost = 5
		completion_reward = {
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 1000
				}
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = 1000
				}
			}

			send_equipment = {
			    equipment = infantry_equipment
			    amount = 1000
			    target = FRA
			}

			send_equipment = {
			    equipment = artillery_equipment
			    amount = 1000
			    target = FRA
			}

			add_ai_strategy = {
				type = befriend
				id = FRA
				value = 100
			}
			FRA = {
				add_ai_strategy = {
					type = befriend
					id = ROOT
					value = 100
				}
			}
		}
		search_filters = {  FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = POR_anti_fascism
		prerequisite = { focus = POR_cooperate_with_french_militants }
		icon = GFX_focus_generic_anti_fascist_diplomacy
		x = 0
		y = 1
		select_effect = {
			every_country = {
				limit = {
					has_government = fascism
					NOT = { is_in_faction_with = ROOT }
					OR = {
						is_major = yes
						is_neighbor_of = ROOT
					}
				}
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					faction_leader = {
						has_government = democratic
					}
					AND = {
						is_in_faction = no
						is_major = no
					}
				}
			}
		}

		available = {
			any_country = {
				has_government = fascism
				NOT = { is_in_faction_with = ROOT }
				OR = {
					is_major = yes
					is_neighbor_of = ROOT
				}
			}
			has_army_manpower = {
				size > 349999
			}			
		}

		relative_position_id = POR_cooperate_with_french_militants
		cost = 5
		completion_reward = {
			hidden_effect = {
				every_country = {
					limit = {
						has_government = fascism
						NOT = { is_in_faction_with = ROOT }
						OR = {
							is_major = yes
							is_neighbor_of = ROOT
						}
					}
					ROOT = {
						create_wargoal = {
							target = PREV
							type = topple_government
							expire = 0
						}
					}
				}
			}
			custom_effect_tooltip = POR_anti_fascism_tt
			every_country = { #TOOLTIP Support
				limit = {
					has_government = fascism
					NOT = { is_in_faction_with = ROOT }
					OR = {
						is_major = yes
						is_neighbor_of = ROOT
					}
				}
			}

			hidden_effect = {
				random_country = {
					limit = {
						has_government = fascism
						NOT = { is_in_faction_with = ROOT }
						OR = {
							is_major = yes
							is_neighbor_of = ROOT
						}
					}
					ROOT = {
						add_ai_strategy = {
							type = declare_war
							id = PREV
							value = 100
						}
					}
				}
			}
		}
	}

	focus = {
		id = POR_support_the_spanish_republic
		available = {
			SPR_scw_in_progress = yes
			if = {
				limit = {
					NOT = { has_global_flag = spanish_civil_war }
				}
				custom_trigger_tooltip = {
				    tooltip = POR_spr_tooltip_country_exist_tt
				    country_exists = SPR
			    }
			    custom_trigger_tooltip = {
				    tooltip = POR_spr_tooltip_at_peace_tt
					NOT = { has_war_with = SPR }
			    }
			}
		}
		allow_branch = {
			NOT = {
				OR = {
					has_completed_focus = POR_strict_neutrality_in_the_spanish_civil_war
					has_completed_focus = POR_estado_novo
				}
			}
		}
		bypass = {
			OR = {
				has_global_flag = scw_over
				if = {
					limit = { NOT = { has_global_flag = spanish_civil_war } }
					NOT = { country_exists = SPR }
				}
				else = {
					NOT = { country_exists = SPD }
				}
			}
		}
		prerequisite = { focus = POR_popular_front }
		mutually_exclusive = { focus = POR_strict_neutrality_in_the_spanish_civil_war focus = POR_support_the_spanish_nationalists focus = POR_a_royal_wedding }
		icon = GFX_focus_generic_invite_republican_spanish_exiles
		x = 0
		y = 1

		relative_position_id = POR_popular_front
		cost = 5
		completion_reward = {
			add_stability = -0.05
			mark_focus_tree_layout_dirty = yes
			if = {
				limit = {
					NOT = { has_global_flag = spanish_civil_war }
				}
				custom_effect_tooltip = POR_spanish_republic_tt
			}
			SPD = {
				add_opinion_modifier = {
				    target = POR
				    modifier = POR_helped_in_civil_war
				}
				add_manpower = 10000
			}
			add_ideas = POR_volunteers_in_the_war_republican
			add_manpower = -10000
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 2000
				}
				send_equipment = {
				    equipment = infantry_equipment
				    amount = 2000
				    target = SPD
				}
			}
			custom_effect_tooltip = POR_support_the_spanish_republic_effect_tooltip_tt
			set_rule = { can_send_volunteers = yes }
		}
		search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_SPA_CIVIL_WAR }
	}

	focus = {
		id = POR_workers_of_iberia_unite
		available = {
			SPR_scw_in_progress = yes
			if = {
				limit = {
					NOT = { has_global_flag = spanish_civil_war }
				}
				custom_trigger_tooltip = {
				    tooltip = POR_spr_tooltip_country_exist_tt
				    country_exists = SPR
			    }
			    custom_trigger_tooltip = {
				    tooltip = POR_spr_tooltip_at_peace_tt
					NOT = { has_war_with = SPR }
			    }
			}
			else = {
				country_exists = SPD
				NOT = {has_war_with = SPD }
			}
			is_puppet = no
		}

		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = POR_support_the_spanish_republic }
		mutually_exclusive = { focus = POR_visit_the_front }
		icon = GFX_focus_por_workers_of_iberia
		x = -2
		y = 1

		relative_position_id = POR_support_the_spanish_republic
		cost = 5
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			# Event that add NS to POR and SPD
			hidden_effect = {
				country_event = {
					id = lar_portugal_iberian_workers_united.1
					hours = 6
				}
				SPD = {
					country_event = {
						id = lar_portugal_iberian_workers_united.1
						hours = 6
					}
				}
			}
			custom_effect_tooltip = POR_iberian_workers_effect_tooltip_tt
			#Trigger civil war
			if = {
				limit = {
					NOT = { has_government = communism }
				}
				set_politics = {
					ruling_party = communism
				}
			}
			if = {
				limit = {
					has_civil_war = no
				}
				set_temp_variable = { POR_communist_cw_opposition = party_popularity@democratic }
				multiply_temp_variable = { POR_communist_cw_opposition = 0.8 }
				add_to_temp_variable = { POR_communist_cw_opposition = party_popularity@neutrality }
				add_to_temp_variable = { POR_communist_cw_opposition = party_popularity@fascism }
				hidden_effect = {
					start_civil_war = {
						ideology = neutrality
						size = POR_communist_cw_opposition
						capital = 180
						states = { 181 }
					}
				}
				if = {
					limit = {
						OR = {
							540 = {
								is_core_of = POR
							}
							544 = {
								is_core_of = POR
							}							
						}
					}
					add_ideas = POR_civil_war_surrender_debuff
				}				
				custom_effect_tooltip = POR_workers_of_iberia_unite_civil_war_tt
			}
			else = {
				add_stability = -0.2
			}
			hidden_effect = {
				set_country_flag = POR_supports_SPD_flag
			}
			#Communist Portugal joins SPD
			if = {
				limit = { country_exists = SPA }
				add_to_war = { targeted_alliance = SPD enemy = SPA hostility_reason = asked_to_join }
			}
			if = {
				limit = { country_exists = SPC }
				add_to_war = { targeted_alliance = SPD enemy = SPC hostility_reason = asked_to_join }
			}
			if = {
				limit = { country_exists = SPB }
				add_to_war = { targeted_alliance = SPD enemy = SPB hostility_reason = asked_to_join }
			}
			effect_tooltip = {
				give_military_access = SPD
				SPD = { give_military_access = ROOT }
			}
			hidden_effect = {
				#Grant military access
				diplomatic_relation = {
					country = SPD
					relation = military_access
					active = yes
				}
				SPD = {
					diplomatic_relation = {
						country = POR
						relation = military_access
						active = yes
					}
				}
			}
			#Non-Aligned Portugal joins SPA
			hidden_effect = {
				random_country = {
					limit = {
						original_tag = POR
						has_government = neutrality
					}
					set_country_flag = POR_non_aligned_portugal_supports_SPA_flag
					if = {
						limit = { country_exists = SPA }
						add_to_war = { targeted_alliance = SPA enemy = SPD hostility_reason = asked_to_join }
						if = {
							limit = { country_exists = SPC }
							add_to_war = { targeted_alliance = SPA enemy = SPC hostility_reason = asked_to_join }
						}
						if = {
							limit = { country_exists = SPB }
							add_to_war = { targeted_alliance = SPA enemy = SPB hostility_reason = asked_to_join }
						}
					}
				}
			}
			custom_effect_tooltip = POR_fascist_portugal_joins_scw_tt

			hidden_effect = {
				add_ai_strategy = {
					type = befriend
					id = SPD
					value = 100
				}
				SPD = {
					add_ai_strategy = {
						type = befriend
						id = ROOT
						value = 100
					}
				}
			}
		}
	}

	focus = {
		id = POR_the_iberian_socialist_union
		available = {
			has_government = communism
			has_global_flag = scw_over
			is_puppet = no
			SPR = {
				exists = yes
				OR = {
					is_puppet_of = ROOT
					AND = {
						is_puppet = no	
						NOT = {
							has_war_with = ROOT
						}
					}
				}
			}
		}
		prerequisite = { focus = POR_workers_of_iberia_unite }
		icon = GFX_focus_generic_befriend_portugal
		x = 0
		y = 1

		relative_position_id = POR_workers_of_iberia_unite
		cost = 10
		search_filters = {FOCUS_FILTER_ANNEXATION}
		completion_reward = {
			if = {
				limit = {
					NOT = { has_global_flag = spanish_civil_war }
				}
				effect_tooltip = {
					custom_effect_tooltip = POR_the_iberian_socialist_union_cosmetic_name_tt
					hidden_effect = {
						every_state = {
							limit = {
								OR = {
									state = 118
									has_state_flag = SPR_core_of_spain_flag
								}
							}
							add_core_of = ROOT
						}
					}
					custom_effect_tooltip = POR_the_iberian_socialist_union_cores_tt
					custom_effect_tooltip = POR_the_iberian_socialist_union_annex_puppets_tt
					custom_effect_tooltip = POR_the_iberian_socialist_union_tt
					every_country = {
						limit = {
							OR = {
								tag = GLC
								tag = NAV
								tag = CAT
								tag = ADU
							}
							NOT = { has_war_with = ROOT }
							NOT = { is_puppet_of = ROOT }
						}
						country_event = { id = lar_portugal_iberian_workers_united.2 hours = 6 }
					}
				}
			}
			else = {
				hidden_effect = {
					set_cosmetic_tag = ESU_POR_unified
				}
				custom_effect_tooltip = POR_the_iberian_socialist_union_cosmetic_name_tt
				#Get cores on all Spanish cores and Gibraltar
				hidden_effect = {
					every_state = {
						limit = {
							OR = {
								state = 118
								has_state_flag = SPR_core_of_spain_flag
							}
						}
						add_core_of = ROOT
					}
				}
				custom_effect_tooltip = POR_the_iberian_socialist_union_cores_tt
				if = { # Any Spanish Puppet will get annexed
					limit = {
						any_country = {
							OR = {
								original_tag = SPR
								tag = GLC
								tag = NAV
								tag = CAT
								tag = ADU
							}
							is_puppet_of = ROOT
						}
					}
					hidden_effect = {
						every_country = {
							limit = {
								OR = {
									original_tag = SPR
									tag = GLC
									tag = NAV
									tag = CAT
									tag = ADU
								}
								is_puppet_of = ROOT
							}
							ROOT = {
								annex_country = {
								    target = PREV
								    transfer_troops = yes
								}
							}
						}
					}
				}
				custom_effect_tooltip = POR_the_iberian_socialist_union_annex_puppets_tt
				# Event for annexation sent to independent Spanish tags
				every_country = {
					limit = {
						OR = {
							tag = SPD
							tag = GLC
							tag = NAV
							tag = CAT
							tag = ADU
						}
						NOT = { has_war_with = ROOT }
						NOT = { is_puppet_of = ROOT }
					}
					country_event = { id = lar_portugal_iberian_workers_united.2 hours = 6 }
				}
			}
		}
	}

	focus = {
		id = POR_align_against_the_comintern
		icon = GFX_focus_ger_great_red_menace
		prerequisite = { focus = POR_the_iberian_socialist_union }
		mutually_exclusive = { focus = POR_the_popular_front_bloc focus = POR_join_the_comintern }
		x = -1
		y = 1
		relative_position_id = POR_the_iberian_socialist_union

		cost = 5

		ai_will_do = {
			factor = 5
		}

		available = {
			has_global_flag = scw_over
			has_government = communism
			is_in_faction = no
			any_other_country = {
					capital_scope = {
						is_on_continent = europe
					}
					NOT = {
						original_tag = SOV
					}
					is_faction_leader = yes
					has_government = communism
					NOT = {
						has_war_with = ROOT
					}
			}
		}

		bypass = {
			is_in_faction = yes
		}

		completion_reward = {
			if = {
				limit = {
					any_other_country = {
						capital_scope = {
							is_on_continent = europe
						}
						NOT = {
							original_tag = SOV
						}
						is_faction_leader = yes
						has_government = communism
						NOT = {
							has_war_with = ROOT
						}
					}
				}
			}
			add_political_power = 200
			set_rule = {
				can_create_factions = yes
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = POR_the_popular_front_bloc
		available = {
			has_global_flag = scw_over
			has_government = communism
		}
		prerequisite = { focus = POR_the_iberian_socialist_union }
		mutually_exclusive = { focus = POR_join_the_comintern focus = POR_align_against_the_comintern }
		icon = GFX_focus_por_remember_olivenca
		x = 1
		y = 1

		relative_position_id = POR_the_iberian_socialist_union
		cost = 5
		completion_reward = {
			if = {
				limit = {
					any_other_country = {
						NOT = {
							original_tag = SOV
						}
						is_faction_leader = yes
						has_government = communism
						NOT = {
							has_war_with = ROOT
						}
					}
				}
			}
			else = {
				create_faction = POR_popular_front_bloc
				every_other_country = {
					limit = {
						capital_scope = { is_on_continent = europe }
						has_government = communism
						is_in_faction = yes
					}
					add_opinion_modifier = {
						target = POR
						modifier = POR_iberian_communism
					}
				}
				every_other_country = {
					limit = {
						capital_scope = { is_on_continent = europe }
						has_government = communism
						is_in_faction = no
					}
					add_opinion_modifier = {
						target = POR
						modifier = POR_iberian_communism
					}
					hidden_effect = {
						country_event = generic.5
					}
					custom_effect_tooltip = POR_the_popular_front_bloc_tt
				}
				custom_effect_tooltip = POR_the_popular_front_bloc_explanatory_tt
			}			
			every_other_country = {
				limit = {
					capital_scope = { is_on_continent = europe }
					NOT = { has_government = communism }
					communism > 0.19
				}
				add_timed_idea = {
					idea = POR_iberian_communism_pressure
					days = 730
				}
			}
			# SPA Iberian Pact - either POR or SPA join a faction - the other must be added too.
			if = {
				limit = {
					has_country_flag = SPA_iberian_pact
				}
				save_event_target_as = iberian_pact_invitee
				every_other_country = {
					limit = {
						OR = {
							original_tag = POR
							original_tag = SPA
						}
						has_country_flag = SPA_iberian_pact
						NOT = { is_in_faction_with = ROOT }
						NOT = { is_in_faction = yes }
					}
					country_event = lar_spain.28
				}
			}
		}
	}

	focus = {
		id = POR_latin_american_communism
		available = {
			has_global_flag = scw_over
			has_government = communism
			OR = {
				country_exists = BRA country_exists = MEX
				country_exists = COL country_exists = ARG
				country_exists = PRU country_exists = VEN
				country_exists = CHL country_exists = GUA
				country_exists = ECU country_exists = CUB
				country_exists = BOL country_exists = HAI
				country_exists = DOM country_exists = HON
				country_exists = PAR country_exists = ELS
				country_exists = NIC country_exists = COS
				country_exists = PAN country_exists = URG
			}
		}
		prerequisite = { focus = POR_the_popular_front_bloc focus = POR_align_against_the_comintern }
		icon = GFX_focus_por_latin_american_communism
		x = -1
		y = 1

		relative_position_id = POR_the_popular_front_bloc
		cost = 10
		completion_reward = {
			every_other_country = {
				limit = {
					OR = {
						TAG = BRA TAG = MEX
						TAG = COL TAG = ARG
						TAG = PRU TAG = VEN
						TAG = CHL TAG = GUA
						TAG = ECU TAG = CUB
						TAG = BOL TAG = HAI
						TAG = DOM TAG = HON
						TAG = PAR TAG = ELS
						TAG = NIC TAG = COS
						TAG = PAN TAG = URG
					}
					has_government = communism
				}
				add_opinion_modifier = {
					target = POR
					modifier = POR_iberian_communism
				}
			}
			every_other_country = {
				limit = {
					OR = {
						TAG = BRA TAG = MEX
						TAG = COL TAG = ARG
						TAG = PRU TAG = VEN
						TAG = CHL TAG = GUA
						TAG = ECU TAG = CUB
						TAG = BOL TAG = HAI
						TAG = DOM TAG = HON
						TAG = PAR TAG = ELS
						TAG = NIC TAG = COS
						TAG = PAN TAG = URG
					}
					NOT = { has_government = communism }
				}
				add_popularity = {
				    ideology = communism
				    popularity = 0.05
				}
				add_timed_idea = {
					idea = communist_influence
					days = 730
				}
			}
			add_ideas = POR_spread_communism_overseas
		}
	}

	focus = {
		id = POR_our_comrades_overseas
		available = {
			has_global_flag = scw_over
			has_government = communism
			any_country = {
				OR = {
					TAG = BRA TAG = MEX
					TAG = COL TAG = ARG
					TAG = PRU TAG = VEN
					TAG = CHL TAG = GUA
					TAG = ECU TAG = CUB
					TAG = BOL TAG = HAI
					TAG = DOM TAG = HON
					TAG = PAR TAG = ELS
					TAG = NIC TAG = COS
					TAG = PAN TAG = URG
				}
				has_government = communism
			}
		}
		prerequisite = { focus = POR_latin_american_communism }
		icon = GFX_focus_hol_legacy_of_the_de_zeven_provincien_mutiny
		x = 0
		y = 1

		relative_position_id = POR_latin_american_communism
		cost = 10
		completion_reward = {
			every_other_country = {
				limit = {
					OR = {
						TAG = BRA TAG = MEX
						TAG = COL TAG = ARG
						TAG = PRU TAG = VEN
						TAG = CHL TAG = GUA
						TAG = ECU TAG = CUB
						TAG = BOL TAG = HAI
						TAG = DOM TAG = HON
						TAG = PAR TAG = ELS
						TAG = NIC TAG = COS
						TAG = PAN TAG = URG
					}
					has_government = communism
				}
				if = {
					limit = { is_in_faction = no }
					hidden_effect = {
						country_event = generic.5
					}
					custom_effect_tooltip = POR_the_popular_front_bloc_tt
				}
			}
			custom_effect_tooltip = POR_our_comrades_overseas_tt
		}
	}

	focus = {
		id = POR_reconquest_of_brazil

		will_lead_to_war_with = BRA

		select_effect = {
			random_country = {
				limit = { controls_state = 500 }
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		available = {
			has_army_manpower = {
				size > 149999
			}		
			has_civil_war = no			
		}

		prerequisite = { focus = POR_latin_american_communism }

		icon = GFX_focus_por_recover_brazil
		x = 1
		y = 2

		relative_position_id = POR_latin_american_communism 
		cost = 5
		completion_reward = {
			add_war_support = 0.05
			add_state_claim = 500 #Rio
			create_wargoal = {
				target = BRA
				type = annex_everything
			}
			USA = {
				diplomatic_relation = { country = BRA relation = guarantee active = no }
			}

			hidden_effect = {
				random_country = {
					limit = { controls_state = 500 }
					ROOT = {
						add_ai_strategy = {
							type = declare_war
							id = PREV
							value = 100
						}
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = POR_visit_the_front
		available = {
			SPR_scw_in_progress = yes
			if = {
				limit = {
					NOT = { has_global_flag = spanish_civil_war }
				}
				custom_trigger_tooltip = {
				    tooltip = POR_spr_tooltip_country_exist_tt
				    country_exists = SPR
			    }
			    custom_trigger_tooltip = {
				    tooltip = POR_spr_tooltip_at_peace_tt
					NOT = { has_war_with = SPR }
			    }
			}
			else = {
				country_exists = SPD
				NOT = {has_war_with = SPD }
			}
		}

		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = POR_support_the_spanish_republic }
		mutually_exclusive = { focus = POR_workers_of_iberia_unite}
		icon = GFX_focus_eng_special_air_service
		x = 2
		y = 1

		relative_position_id = POR_support_the_spanish_republic
		cost = 5
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_SPA_CIVIL_WAR }
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = POR_visit_the_front
			    cost_reduction = 1
			    uses = 1
			    category = land_doctrine
			}
			add_tech_bonus = {
				name = POR_visit_the_front
			    bonus = 0.5
			    uses = 1
			    category = air_equipment
			}
			add_tech_bonus = {
				name = POR_visit_the_front
			    bonus = 0.5
			    uses = 1
			    category = infantry_weapons
			}
			add_tech_bonus = {
				name = POR_visit_the_front
			    bonus = 0.5
			    uses = 1
			    category = armor
			}
			army_experience = 25
			air_experience = 25

			hidden_effect = {
				add_ai_strategy = {
					type = befriend
					id = SPD
					value = 100
				}
				SPD = {
					add_ai_strategy = {
						type = befriend
						id = ROOT
						value = 100
					}
				}
			}
		}
	}

	focus = {
		id = POR_they_need_our_help

		select_effect = {
			if = {
				limit = {
					country_exists = SPA
					is_neighbor_of = SPA
				}
				add_ai_strategy = {
					type = prepare_for_war
					id = SPA
					value = 100
				}
			}
			if = {
				limit = {
					country_exists = SPB
					is_neighbor_of = SPB
				}
				add_ai_strategy = {
					type = prepare_for_war
					id = SPB
					value = 100
				}
			}
			if = {
				limit = {
					country_exists = SPC
					is_neighbor_of = SPC
				}
				add_ai_strategy = {
					type = prepare_for_war
					id = SPC
					value = 100
				}
			}
		}

		available = {
			has_civil_war = no
			SPR_scw_in_progress = yes
			if = {
				limit = {
					NOT = { has_global_flag = spanish_civil_war }
				}
				custom_trigger_tooltip = {
				    tooltip = POR_spr_tooltip_country_exist_tt
				    country_exists = SPR
			    }
			    custom_trigger_tooltip = {
				    tooltip = POR_spr_tooltip_at_peace_tt
					NOT = { has_war_with = SPR }
			    }
			}
			else = {
				country_exists = SPD
				NOT = {has_war_with = SPD }
			}
			has_government = communism
			is_puppet = no
		}

		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = POR_visit_the_front }
		icon = GFX_focus_intervention_spain_republic
		x = 0
		y = 2

		relative_position_id = POR_visit_the_front
		cost = 5
		completion_reward = {
			unlock_decision_tooltip = POR_fight_alongside_the_republic
			if = {
				limit = { country_exists = SPA }
				SPA = {
					country_event = { id = lar_portugal_spanish_civil_war.1 }
				}
			}
			if = {
				limit = { country_exists = SPB }
				SPB = {
					country_event = { id = lar_portugal_spanish_civil_war.1 }
				}
			}
			if = {
				limit = { country_exists = SPC }
				SPC = {
					country_event = { id = lar_portugal_spanish_civil_war.1 }
				}
			}
		}
		search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_SPA_CIVIL_WAR }
	}

	focus = {
		id = POR_intervention_in_spain

		select_effect = {
			add_ai_strategy = {
				type = befriend
				id = SPD
				value = -100
			}
			add_ai_strategy = {
				type = alliance
				id = SPD
				value = -100
			}
			add_ai_strategy = {
				type = prepare_for_war
				id = SPD
				value = 100
			}
		}
		offset = {
			x = -3
			y = 0
			trigger = {
				AND = {
					has_completed_focus = POR_strict_neutrality_in_the_spanish_civil_war
					has_completed_focus = POR_estado_novo
				}
			}
		}
		available = {
			has_global_flag = scw_over
			OR = {
				has_government = democratic
				has_government = communism
			}
			any_country = {
				original_tag = SPR
				NOT = { has_government = ROOT }
			}
			has_civil_war = no
			has_army_manpower = {
				size > 99999
			}		
			has_civil_war = no				
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_completed_focus = POR_support_the_spanish_republic
				NOT = { has_completed_focus = POR_join_the_comintern }
			}
			modifier = {
				factor = 100
				has_completed_focus = POR_join_the_comintern
				SPD = { has_completed_focus = SPR_against_trotskyism_and_stalinism }
			}
		}
		prerequisite = { focus = POR_they_need_our_help focus = POR_allow_free_elections }
		icon = GFX_focus_focus_fra_intervention_spain
		x = 0
		y = 1

		relative_position_id = POR_they_need_our_help
		cost = 5
		completion_reward = {
			hidden_effect = {
				every_country = {
					limit = {
						original_tag = SPR
						NOT = { has_government = ROOT }
					}
					POR = {
						create_wargoal = {
						  	target = PREV
							expire = 0
						    type = topple_government
						}
					}
				}
			}
			custom_effect_tooltip = POR_intervention_in_spain_tt

			hidden_effect = {
				add_ai_strategy = {
					type = declare_war
					id = SPD
					value = 100
				}
			}
		}
		search_filters = { FOCUS_FILTER_SPA_CIVIL_WAR }
	}

	focus = {
		id = POR_securing_the_free_world
		available = {
			has_government = democratic
		}
		prerequisite = { focus = POR_allow_free_elections }

		icon = GFX_focus_generic_treaty
		x = -1
		y = 1
		offset = {
			x = 0
			y = 0
			trigger = {
				AND = {
					has_completed_focus = POR_strict_neutrality_in_the_spanish_civil_war
					has_completed_focus = POR_estado_novo
				}
			}
		}
		relative_position_id = POR_allow_free_elections
		cost = 5
		completion_reward = {
			hidden_effect = {
				every_other_country = {
					limit = {
						capital_scope = {
							is_on_continent = europe
						}
						OR = {
							has_government = democratic
							has_government = neutrality
						}
						is_major = no
					}
					POR = {
						give_guarantee = PREV

						add_ai_strategy = {
							type = befriend
							id = PREV
							value = 100
						}
					}
				}
			}
			custom_effect_tooltip = portugal_guarantees_freedom_tt
			set_rule = { can_create_factions = yes }
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = POR_western_democratic_bastion
		available = {
			has_government = democratic
		}
		prerequisite = { focus = POR_securing_the_free_world }

		icon = GFX_focus_generic_democratic_europe
		x = 0
		y = 1
		relative_position_id = POR_securing_the_free_world
		cost = 5
		completion_reward = {
			add_ideas = JAP_bastion_of_democracy
				}
			}

	focus = {
		id = POR_protect_chinese_civilians

		select_effect = {
			random_country = {
				limit = { controls_state = 592 }
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}
		offset = {
			x = 3
			y = 1
			trigger = {
				AND = {
					has_completed_focus = POR_strict_neutrality_in_the_spanish_civil_war
					has_completed_focus = POR_popular_front
				}
			}
		}
		offset = {
			x = -3
			y = 0
			trigger = {
				AND = {
					has_completed_focus = POR_strict_neutrality_in_the_spanish_civil_war
					has_completed_focus = POR_estado_novo
				}
			}
		}
		available = {
			has_global_flag = scw_over
			592 = {
				owner = {
					has_war = yes
					NOT = { is_in_faction_with = ROOT }
				}
			}
			has_army_manpower = {
				size > 149999
			}			
		}
		prerequisite = { focus = POR_they_need_our_help focus = POR_allow_free_elections focus = POR_the_popular_front_bloc }
		icon = GFX_focus_chi_united_front
		x = -2
		y = 1

		relative_position_id = POR_they_need_our_help
		cost = 5
		completion_reward = {
			592 = {
				owner =  {
					ROOT = {
						create_wargoal = {
						  	target = PREV
							expire = 0
						    type = annex_everything
						}
					}
				}
			}

			hidden_effect = {
				random_country = {
					limit = { controls_state = 592 }
					ROOT = {
						add_ai_strategy = {
							type = declare_war
							id = PREV
							value = 100
						}
					}
				}
			}
		}
	}

	focus = {
		id = POR_strict_neutrality_in_the_spanish_civil_war
		available = {
			SPR_scw_in_progress = yes
		}

		ai_will_do = {
			factor = 1
		}

		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = POR_popular_front focus = POR_estado_novo }
		mutually_exclusive	= { focus = POR_support_the_spanish_republic focus = POR_support_the_spanish_nationalists focus = POR_a_royal_wedding }
		icon = GFX_goal_generic_neutrality_focus
		x = 5
		y = 0
		allow_branch = {
			NOT = {
				OR = {
					has_completed_focus = POR_support_the_spanish_republic
					has_completed_focus = POR_support_the_spanish_nationalists
					has_completed_focus = POR_a_royal_wedding
				}
			}
		}
		offset = {
			x = -5 
			y = 0
			trigger = {
				AND = {
					has_completed_focus = POR_strict_neutrality_in_the_spanish_civil_war
					has_completed_focus = POR_popular_front
				}
			}
		}
		offset = {
			x = -3
			y = 0
			trigger = {
				AND = {
					has_completed_focus = POR_strict_neutrality_in_the_spanish_civil_war
					has_completed_focus = POR_estado_novo
				}
			}
		}
		relative_position_id = POR_support_the_spanish_republic
		cost = 5
		completion_reward = {
			add_stability = 0.05
			mark_focus_tree_layout_dirty = yes
			every_other_country = {
				add_opinion_modifier = {
				    target = POR
				    modifier = POR_neutrality_opinion_trade
				}
			}
			every_other_country = {
				limit = {
					has_government = democratic
				}
				add_opinion_modifier = {
				    target = POR
				    modifier = POR_neutrality_opinion_democratic
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = POR_british_investment_in_mines
		available = {
			NOT = { has_government = communism }
			ENG = {
				exists = yes
				NOT = { has_war_with = ROOT }
				has_civil_war = no
				has_capitulated = no
				owns_state = 126 #Owns London
			}
		}

		bypass = {
			NOT = { country_exists = ENG }
		}
		prerequisite = { focus = POR_strict_neutrality_in_the_spanish_civil_war }
		icon = GFX_goal_generic_construct_civilian
		x = -1
		y = 1

		relative_position_id = POR_strict_neutrality_in_the_spanish_civil_war
		cost = 10
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 112 }
				add_resource = {
				    type = tungsten
				    amount = 40
				    state = 112 #Lisbon
				}
			}
			add_tech_bonus = {
				name = POR_british_investment_in_mines
			    bonus = 1.0
			    uses = 2
			    category = industry
			}
			add_ideas = POR_british_influence

			hidden_effect = {
				add_ai_strategy = {
					type = befriend
					id = ENG
					value = 50
				}
				ENG = {
					add_ai_strategy = {
						type = befriend
						id = ROOT
						value = 50
					}
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = POR_british_guns
		prerequisite = { focus = POR_strict_neutrality_in_the_spanish_civil_war }
		icon = GFX_goal_generic_military_sphere
		x = 1
		y = 1

		relative_position_id = POR_strict_neutrality_in_the_spanish_civil_war
		cost = 10
		completion_reward = {
			if = {
				limit = {
					amount_taken_ideas = {
						amount < 3
						slots = {
							political_advisor
						}
					}
				}
				activate_advisor = POR_maria_lamas
			}
			unlock_decision_tooltip = POR_buy_aa_in_britain
			unlock_decision_tooltip = POR_buy_at_in_britain
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = { #Lisbon
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = { #Porto
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 181 }
				181 = { #Guarda
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 179 }
				179 = { #Beja
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = POR_british_industrial_investments
		available = {
			has_capitulated = no
			ENG = {
				exists = yes
				NOT = { has_war_with = ROOT }
				has_civil_war = no
				has_capitulated = no
				owns_state = 126 #Owns London
			}
		}

		bypass = {
			NOT = { country_exists = ENG }
		}
		prerequisite = { focus = POR_british_investment_in_mines focus = POR_british_guns}
		icon = GFX_focus_generic_industry_3
		x = 1
		y = 1

		relative_position_id = POR_british_investment_in_mines
		cost = 10
		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 112 }
				112 = { #Lisbon
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 180 }
				180 = { #Porto
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 181 }
				181 = { #Guarda
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = { has_full_control_of_state = 179 }
				179 = { #Beja
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = {has_completed_focus = POR_estado_novo}
				remove_ideas = POR_estado_novo
			}

			hidden_effect = {
				add_ai_strategy = {
					type = befriend
					id = ENG
					value = 100
				}
				ENG = {
					add_ai_strategy = {
						type = befriend
						id = ROOT
						value = 100
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = POR_allow_free_elections
		available = {
			democratic > 0.4
			has_war = no
		}
		prerequisite = { focus = POR_british_industrial_investments }
		icon = GFX_goal_support_democracy
		x = 0
		y = 1

		relative_position_id = POR_british_industrial_investments
		cost = 10
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY}
		completion_reward = {
			every_other_country = {
				limit = {
					has_government = democratic
				}

				add_opinion_modifier = {
				    target = POR
				    modifier = POR_election_opinion_democratic
				}
			}
			remove_ideas = POR_unstable_republic
			if = {
				limit = {
					has_idea = internationalism
				}
				remove_ideas = internationalism
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_jaime_cortesao
			custom_effect_tooltip = available_theorist
			show_ideas_tooltip = POR_jose_manuel_sarmento_de_beires
			if = {
				limit = {
					has_completed_focus = POR_limited_self_rule
				}
				custom_effect_tooltip = available_political_advisor
				show_ideas_tooltip = POR_francisco_da_cunha_leal
			}
			create_corps_commander = {
				name = "Jos√© Mendes dos Reis"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_land_4.dds"
				traits = { war_hero infantry_officer }
				skill = 3
				attack_skill = 3
				defense_skill = 2
				planning_skill = 3
				logistics_skill = 3
			}
			create_navy_leader = {
				name = "Armando Pereira de Castro Agat√£o Lan√ßa"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_navy_1.dds"
				traits = { spotter bold }
				skill = 3
				attack_skill = 2
				defense_skill = 4
				maneuvering_skill = 3
				coordination_skill = 2
			}
			if = {
				limit = {
					NOT = { has_government = democratic }
				}
				set_politics = {
					ruling_party = democratic
					elections_allowed = yes
				}

				if = { #Low Stability triggers a Civil War
					limit = {
						has_stability < 0.4
					}
					set_temp_variable = { POR_democratic_cw_opposition = party_popularity@neutrality }
					multiply_temp_variable = { POR_democratic_cw_opposition = 0.6 }
					add_to_temp_variable = { POR_democratic_cw_opposition = party_popularity@fascism }
					start_civil_war = {
						ideology = fascism
						size = POR_democratic_cw_opposition
						capital = 180
						states = { 181 }
					}
					if = {
						limit = {
							OR = {
								540 = {
									is_core_of = POR
								}
								544 = {
									is_core_of = POR
								}							
							}
						}
						add_ideas = POR_civil_war_surrender_debuff
					}					
				}
				else = {
					add_stability = 0.1
				}
				custom_effect_tooltip = POR_potential_civil_war_low_requirement_tt
			}
			else = {
				add_political_power = 120
				add_popularity = {
				    ideology = democratic
				    popularity = 0.05
				}
			}
		}
	}

	focus = {
		id = POR_join_the_allies
		available = {
			is_in_faction = no
			any_other_country = {
				NOT = { has_war_with = ROOT }
				is_faction_leader = yes
				is_major = yes
				has_government = democratic
				has_opinion = {
					target = ROOT
					value > -11
				}				
			}
			NOT = {
				any_other_country = {
					is_in_faction_with = ENG
					has_war_with = POR
				}
			}
		}

		bypass = {
			OR = {
				is_in_faction_with = ENG
				AND = {
					is_in_faction = yes
					any_other_country = {
						is_faction_leader = yes
						is_in_faction_with = ROOT
						has_government = democratic
					}
				}
			}
		}
		prerequisite = { focus = POR_allow_free_elections }
		icon = GFX_focus_chi_british_cooperation
		x = 1
		y = 2

		relative_position_id = POR_allow_free_elections
		cost = 5
		completion_reward = {
			add_ideas = POR_defence_of_freedom
			if = {
				limit = {
					ENG = {
						is_faction_leader = yes
						has_government = democratic
						not = { has_war_with = ROOT }
					}
				}
				ENG = { country_event = { id = generic.2 hours = 4 } }
			}						
			else = {
				get_best_alliance_match_democratic_effect = yes
				var:best_leader = {
					country_event = { id = generic.2 hours = 4 }
				}
			}
		}
	}

	focus = {
		id = POR_research_sharing
		available = {
			is_in_faction_with = ENG
		}
		prerequisite = { focus = POR_join_the_allies focus = POR_honor_anglo_portuguese_alliance }
		icon = GFX_focus_research2
		x = 1
		y = 1
		offset = {
			x = -10
			y = 0
			trigger = {
				has_completed_focus = POR_support_the_spanish_nationalists
			}
		}
		relative_position_id = POR_join_the_allies
		cost = 5
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			ENG = { add_to_tech_sharing_group = commonwealth_research }
			add_to_tech_sharing_group = commonwealth_research
			add_ideas = POR_british_influence
		}
	}

	focus = {
		id = POR_oppose_germany

		will_lead_to_war_with = GER

		select_effect = {
			add_ai_strategy = {
				type = prepare_for_war
				id = GER
				value = 100
			}
		}

		available = {
			country_exists = GER
			GER = {
				has_government = fascism
				has_capitulated = no
			}
			has_army_manpower = {
				size > 249999
			}		
			has_civil_war = no
			r56_script_i_am_sane = yes	
		}
		offset = {
			x = -10
			y = 0
			trigger = {
				has_completed_focus = POR_support_the_spanish_nationalists
			}
		}
		prerequisite = { focus = POR_join_the_allies focus = POR_honor_anglo_portuguese_alliance }
		icon = GFX_focus_ger_oppose_hitler
		x = 3
		y = 1

		relative_position_id = POR_join_the_allies
		cost = 5
		completion_reward = {
			create_wargoal = {
				target = GER
				type = topple_government
				expire = 0
			}

			hidden_effect = {
				add_ai_strategy = {
					type = declare_war
					id = GER
					value = 100
				}
			}
		}
	}

	focus = {
		id = POR_iberian_summit
		available = {
			has_global_flag = scw_over
			has_war = no
			is_in_faction = no
			NOT = { has_government = communism }
			OR = {
				if = {
					limit = {
						NOT = { has_global_flag = spanish_civil_war }
					}
					custom_trigger_tooltip = {
					    tooltip = POR_spr_tooltip_country_exist_tt
					    country_exists = SPR
				    }
				    custom_trigger_tooltip = {
					    tooltip = POR_spr_tooltip_at_peace_tt
						NOT = { has_war_with = SPR }
				    }
				    SPR = {
				 	   has_completed_focus = SPR_maintain_the_second_republic
				    	has_government = democratic
				    }
				}
				else = {
					AND = {
						country_exists = SPD
						SPD = {
							has_war = no
							is_in_faction = no
							has_completed_focus = SPR_maintain_the_second_republic
							has_government = democratic
						}
					}
				}
				AND = {
					country_exists = SPA
					SPA = {
						has_war = no
						is_in_faction = no
						OR = {
							has_completed_focus = SPA_the_phalanx_ascendant
							AND = {
								has_completed_focus = SPA_unify_the_nationalist_front
								NOT = { has_completed_focus = SPA_the_iberian_pact }
							}
						}
					}
				}
			}
		}
		offset = {
			x = 2
			y = 0
			trigger = {
				AND = {
					has_completed_focus = POR_strict_neutrality_in_the_spanish_civil_war
					has_completed_focus = POR_popular_front
				}
			}
		}
		offset = {
			x = -10
			y = 0
			trigger = {
				has_completed_focus = POR_support_the_spanish_nationalists
			}
		}
		prerequisite = { focus = POR_allow_free_elections focus = POR_send_assistance }

		mutually_exclusive = { focus = POR_nationalist_intervention }

		icon = GFX_focus_por_iberian_summit
		x = 2
		y = 1

		relative_position_id = POR_allow_free_elections
		cost = 5
		completion_reward = {
			unlock_decision_tooltip = POR_iberian_summit_pro_axis
			unlock_decision_tooltip = POR_iberian_summit_pro_allies
		}
	}

	focus = {
		id = POR_estado_novo
		mutually_exclusive = { focus = POR_popular_front}
		prerequisite = {
		}
		icon = GFX_focus_por_estado_novo
		x = 12
		y = 0
		allow_branch = {
			NOT = {
				has_completed_focus = POR_popular_front
			}
		}
		offset = {
			x = -12
			y = 0
			trigger = {
				has_completed_focus = POR_a_royal_wedding
			}
		}
		offset = {
			x = -10
			y = 0
			trigger = {
				has_completed_focus = POR_strict_neutrality_in_the_spanish_civil_war
			}
		}
		offset = {
			x = -10
			y = 0
			trigger = {
				has_completed_focus = POR_support_the_spanish_nationalists
			}
		}
		relative_position_id = POR_popular_front
		cost = 10
		completion_reward = {
			mark_focus_tree_layout_dirty = yes
			add_ideas = POR_estado_novo
			add_political_power = 100
			custom_effect_tooltip = available_chief_of_army
			show_ideas_tooltip = POR_julio_botelho_moniz
			custom_effect_tooltip = remove_political_advisor
			show_ideas_tooltip = POR_alvaro_cunhal
		}
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_POLITICAL}
	}

	focus = {
		id = POR_support_the_spanish_nationalists
		available = {
			SPR_scw_in_progress = yes
			country_exists = SPA
			NOT = { has_war_with = SPA }
		}

		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = POR_estado_novo }
		mutually_exclusive = { focus = POR_strict_neutrality_in_the_spanish_civil_war focus = POR_support_the_spanish_republic focus = POR_a_royal_wedding }
		icon = GFX_goal_support_fascism
		x = 0
		y = 1
		allow_branch = {
			NOT = {
				OR = {
					has_completed_focus = POR_popular_front
					has_completed_focus = POR_strict_neutrality_in_the_spanish_civil_war
					has_completed_focus = POR_a_royal_wedding
				}
			}
		}
		offset = {
			x = 0
			y = 0
			trigger = {
				has_completed_focus = POR_support_the_spanish_nationalists
			}
		}
		relative_position_id = POR_estado_novo
		cost = 5
		completion_reward = {
			add_stability = -0.05
			mark_focus_tree_layout_dirty = yes
			SPA = {
				add_opinion_modifier = {
				    target = POR
				    modifier = POR_helped_in_civil_war
				}
				add_manpower = 10000
			}
			add_ideas = POR_volunteers_in_the_war_nationalist
			add_manpower = -10000
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 2000
				}
			}
			send_equipment = {
			    equipment = infantry_equipment
			    amount = 2000
			    target = SPA
			}
			set_rule = { can_send_volunteers = yes }
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_SPA_CIVIL_WAR }
	}

	focus = {
		id = POR_portuguese_legion
		available = {
			SPR_scw_in_progress = yes
		}

		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = POR_support_the_spanish_nationalists }
		icon = GFX_focus_por_portuguese_legion
		x = 0
		y = 1

		relative_position_id = POR_support_the_spanish_nationalists
		cost = 5
		completion_reward = {
			add_ideas = por_portuguese_legion
		}
		search_filters = {FOCUS_FILTER_MANPOWER}
	}

	focus = {
		id = POR_observation_mission

		available = {
			SPR_scw_in_progress = yes
			country_exists = SPA
			NOT = { has_war_with = SPA }
		}

		bypass = {
			has_global_flag = scw_over
		}

		ai_will_do = {
			factor = 1.1
		}
		
		prerequisite = { focus = POR_portuguese_legion }
		icon = GFX_goal_generic_position_armies
		x = -4
		y = 1

		relative_position_id = POR_portuguese_legion
		cost = 5
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = POR_visit_the_front
			    cost_reduction = 0.5
			    uses = 1
			    category = land_doctrine
			}
			add_tech_bonus = {
				name = POR_visit_the_front
			    bonus = 0.5
			    uses = 1
			    category = air_equipment
			}
			add_tech_bonus = {
				name = POR_visit_the_front
			    bonus = 0.5
			    uses = 1
			    category = infantry_weapons
			}
			add_tech_bonus = {
				name = POR_visit_the_front
			    bonus = 0.5
			    uses = 1
			    category = armor
			}
			army_experience = 25
			air_experience = 25

			hidden_effect = {
				add_ai_strategy = {
					type = befriend
					id = SPA
					value = 100
				}
				SPA = {
					add_ai_strategy = {
						type = befriend
						id = POR
						value = 100
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_SPA_CIVIL_WAR }
	}

	focus = {
		id = POR_send_assistance

		select_effect = {
			if = {
				limit = {
					country_exists = SPD
					is_neighbor_of = SPD
				}
				add_ai_strategy = {
					type = prepare_for_war
					id = SPD
					value = 100
				}
			}
			if = {
				limit = {
					country_exists = SPB
					is_neighbor_of = SPB
				}
				add_ai_strategy = {
					type = prepare_for_war
					id = SPB
					value = 100
				}
			}
			if = {
				limit = {
					country_exists = SPC
					is_neighbor_of = SPC
				}
				add_ai_strategy = {
					type = prepare_for_war
					id = SPC
					value = 100
				}
			}
		}

		available = {
			has_civil_war = no
			SPR_scw_in_progress = yes
			country_exists = SPA
			NOT = { has_war_with = SPA }
			is_puppet = no
		}

		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = POR_observation_mission }
		icon = GFX_focus_intervention_spain_nationalists
		x = 0
		y = 1

		relative_position_id = POR_observation_mission
		cost = 5
		completion_reward = {
			unlock_decision_tooltip = POR_fight_alongside_the_nationalists
			if = {
				limit = { country_exists = SPD }
				SPD = {
					country_event = { id = lar_portugal_spanish_civil_war.2 }
				}
			}
			if = {
				limit = { country_exists = SPB }
				SPB = {
					country_event = { id = lar_portugal_spanish_civil_war.2 }
				}
			}
			if = {
				limit = { country_exists = SPC }
				SPC = {
					country_event = { id = lar_portugal_spanish_civil_war.2 }
				}
			}
		}
		search_filters = { FOCUS_FILTER_SPA_CIVIL_WAR }
	}

	focus = {
		id = POR_nationalist_intervention

		select_effect = {
			add_ai_strategy = {
				type = befriend
				id = SPA
				value = -100
			}
			add_ai_strategy = {
				type = alliance
				id = SPA
				value = -100
			}
			add_ai_strategy = {
				type = prepare_for_war
				id = SPA
				value = 100
			}
		}

		available = {	
			has_global_flag = scw_over
			SPA = {
				NOT = { has_government = ROOT }
			}
			has_civil_war = no
			has_army_manpower = {
				size > 179999
			}				
		}
		prerequisite = { focus = POR_send_assistance}

		mutually_exclusive = { focus = POR_iberian_summit }

		icon = GFX_goal_generic_major_war
		x = 1
		y = 1

		relative_position_id = POR_send_assistance
		cost = 5
		completion_reward = {
			hidden_effect = {
				every_country = {
					limit = {
						original_tag = SPR
						NOT = { has_government = ROOT }
					}
					POR = {
						create_wargoal = {
						  	target = PREV
							expire = 0
						    type = topple_government
						}
					}
				}
			}
			custom_effect_tooltip = POR_nationalist_intervention_tt

			hidden_effect = {
				add_ai_strategy = {
					type = declare_war
					id = SPA
					value = 100
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = POR_strengthen_the_regime
		available = {
			has_country_leader = { character = POR_antonio_de_oliveira_salazar }
			has_manpower > 80000
		}

		ai_will_do = {
			factor = 1
		}
		prerequisite = { focus = POR_portuguese_legion }

		mutually_exclusive = { focus = POR_national_syndicalism }

		icon = GFX_goal_generic_political_pressure
		x = 4
		y = 0

		relative_position_id = POR_observation_mission
		cost = 5
		completion_reward = {
			add_manpower = -5000
			add_stability = -0.1
			add_popularity = {
			    ideology = neutrality
				popularity = 0.10
			}
			swap_ideas = {
				remove_idea = POR_estado_novo
				add_idea = POR_estado_novo_2
			}
			custom_effect_tooltip = remove_chief_of_army
			show_ideas_tooltip = POR_rolao_preto
		}
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY}
	}

	focus = {
		id = POR_the_capital_of_espionage
		available = {
			owns_state = 112
			has_war = no }
		prerequisite = { focus = POR_strengthen_the_regime }

		icon = GFX_goal_generic_intelligence_exchange
		x = -2
		y = 1

		relative_position_id = POR_strengthen_the_regime
		cost = 10
		completion_reward = {
			create_intelligence_agency = 1
			add_ideas = POR_the_capital_of_espionage
		}
		search_filters = {  }
	}

	focus = {
		id = POR_appease_monarchists
		prerequisite = { focus = POR_strengthen_the_regime }
		icon = GFX_goal_tfv_strengthen_commonwealth_ties
		x = 0
		y = 1

		relative_position_id = POR_strengthen_the_regime
		cost = 10
		completion_reward = {
			add_political_power = 70
			add_popularity = {
			    ideology = neutrality
				popularity = 0.05
			}
			swap_ideas = {
				remove_idea = POR_estado_novo_2
				add_idea = POR_estado_novo_3
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_joao_de_azevedo_coutinho
			show_ideas_tooltip = POR_joao_francisco_de_barbosa_azevedo
		}
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_INDUSTRY}
	}

	focus = {
		id = POR_concordat_with_the_holy_see
		prerequisite = { focus = POR_appease_monarchists }
		icon = GFX_focus_por_concordat
		x = -1
		y = 1

		relative_position_id = POR_appease_monarchists
		cost = 10
		completion_reward = {
			add_political_power = 120
			swap_ideas = {
				remove_idea = POR_estado_novo_3
				add_idea = POR_estado_novo_4
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_manuel_goncalves_cerejeira
		}
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}
	}

	focus = {
		id = POR_honor_anglo_portuguese_alliance
		available = {
			is_in_faction = no
			has_war = no
			ENG = {
				exists = yes
				NOT = {
					has_war_with = ROOT
					any_other_country = {
						is_in_faction_with = ENG
						has_war_with = ROOT
					}
				}
			}
			any_country = {
				is_major = yes
				has_war_with = ENG
			}
		}

		prerequisite = { focus = POR_concordat_with_the_holy_see }

		mutually_exclusive = { focus = POR_proudly_alone }

		icon = GFX_goal_generic_alliance
		x = -1
		y = 1

		relative_position_id = POR_concordat_with_the_holy_see
		cost = 5
		completion_reward = {
			add_ideas = POR_defence_of_freedom
			remove_ideas = POR_unstable_republic
			if = {
				limit = {
					ENG = {
						is_faction_leader = yes
						has_government = democratic
						NOT = { has_war_with = ROOT }
					}
				}
				ENG = { country_event = { id = generic.2 hours = 4 } }
			}			
			else = {
				get_best_alliance_match_democratic_effect = yes
				var:best_leader = {
					country_event = { id = generic.2 hours = 4 }
				}
			}
		}
		search_filters = { FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = POR_national_gold_reserves
		available = {
			has_war = no
		}
		prerequisite = { focus = POR_appease_monarchists }
		icon = GFX_focus_usa_reestablish_the_gold_standard
		x = 1
		y = 1

		relative_position_id = POR_appease_monarchists
		cost = 10
		completion_reward = {
			add_ideas = POR_national_gold_reserves
			ENG = {
				add_opinion_modifier = {
					target = POR
					modifier = POR_portuguese_trade
				}
			}
			GER = {
				add_opinion_modifier = {
					target = POR
					modifier = POR_portuguese_trade
				}
			}
			every_other_country = {
				limit = {
					NOT = { tag = GER }
					NOT = { tag = ENG }
					OR = {
						is_in_faction_with = ENG
						is_in_faction_with = GER
					}
				}
				add_opinion_modifier = {
					target = POR
					modifier = POR_portuguese_trade_minor
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
	}

	focus = {
		id = POR_proudly_alone
		available = {
			has_government = neutrality
			has_war = no
		}

		prerequisite = { focus = POR_national_gold_reserves }
		prerequisite = { focus = POR_concordat_with_the_holy_see }

		mutually_exclusive = { focus = POR_honor_anglo_portuguese_alliance }

		icon = GFX_focus_por_salazar
		x = 2
		y = 1

		relative_position_id = POR_concordat_with_the_holy_see
		cost = 10
		completion_reward = {
			swap_ideas = {
				remove_idea = POR_estado_novo_4
				add_idea = POR_estado_novo_5
			}
			remove_ideas = POR_unstable_republic
		}
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_INDUSTRY}
	}

	focus = {
		id = POR_the_eastern_menace

		will_lead_to_war_with = JAP

		select_effect = {
			add_ai_strategy = {
				type = prepare_for_war
				id = JAP
				value = 100
			}
		}

		available = {
			JAP = {
				exists = yes
				NOT = { has_war_with = ROOT }
			}
		
			has_army_manpower = {
				size > 349999
			}		

			has_civil_war = no		
		}

		prerequisite = { focus = POR_proudly_alone }

		icon = GFX_focus_AST_war_japan
		x = -1
		y = 1

		relative_position_id = POR_proudly_alone
		cost = 5
		completion_reward = {
			create_wargoal = {
				target = JAP
				type = puppet_wargoal_focus
				expire = 0
			}

			hidden_effect = {
				add_ai_strategy = {
					type = declare_war
					id = JAP
					value = 100
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = POR_national_syndicalism
		prerequisite = { focus = POR_portuguese_legion }

		mutually_exclusive = { focus = POR_strengthen_the_regime }

		icon = GFX_focus_generic_strike_at_democracy2
		x = 8
		y = 0

		ai_will_do = {
			factor = 0.5
		}

		relative_position_id = POR_observation_mission
		cost = 5
		completion_reward = {
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
			add_war_support = 0.1
			if = {
				limit = {
					is_ai = yes
				}
				add_stability = -0.10
				add_political_power = 150
			}
			else = {
				add_stability = -0.10
			}
			add_ideas = POR_national_syndicalism

			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_jose_hipolito_raposo_2
			show_ideas_tooltip = POR_alberto_monsaraz

			if = {
				limit = {
					amount_taken_ideas = {
						amount < 3
						slots = {
							political_advisor
						}
					}
				}
				add_ideas = POR_alberto_monsaraz
			}
		}
		search_filters = {FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}
	}

	focus = {
		id = POR_ditadura_militar
		available = {
			fascism > 0.5
			has_war = no
		}

		prerequisite = { focus = POR_national_syndicalism }
		icon = GFX_goal_generic_forceful_treaty
		x = 0
		y = 1

		relative_position_id = POR_national_syndicalism
		cost = 5
		completion_reward = {
			remove_ideas = POR_estado_novo
			every_country = {
				limit = {
					has_government = fascism
					is_major = yes
					capital_scope = {
						is_on_continent = europe
					}
				}
				add_opinion_modifier = {
				    target = POR
				    modifier = fascism_leanings_good
				}
			}
			if = {
				limit = {
					NOT = { has_government = fascism }
				}
				set_politics = {
					ruling_party = fascism
				}

				if = { #Low Stability triggers a Civil War
					limit = {
						has_stability < 0.5
					}
					add_popularity = { #should help the civil war a bit(?)
						ideology = fascism
						popularity = 0.05
					}					
					set_temp_variable = { POR_fascist_cw_opposition = party_popularity@neutrality }
					multiply_temp_variable = { POR_fascist_cw_opposition = 0.6 }
					add_to_temp_variable = { POR_fascist_cw_opposition = party_popularity@democratic }
					#remove communists from the civil war because everything I don't like is fascism anyway.
					#add_to_temp_variable = { POR_fascist_cw_opposition = party_popularity@communism }
					start_civil_war = {
						ideology = neutrality
						size = POR_fascist_cw_opposition
						capital = 180
						states = { 181 }
					}
					if = {
						limit = {
							OR = {
								540 = {
									is_core_of = POR
								}
								544 = {
									is_core_of = POR
								}							
							}
						}
						add_ideas = POR_civil_war_surrender_debuff
					}					
				}
				else = {
					add_stability = -0.2
				}
				custom_effect_tooltip = POR_potential_civil_war_high_requirement_tt
			}
			else = {
				add_political_power = 150
				add_popularity = {
				    ideology = fascism
				    popularity = 0.10
				}
			}
		}
		search_filters = {FOCUS_FILTER_POLITICAL}
	}

	focus = {
		id = POR_camisas_azuis
		available = {
			has_government = fascism
		}
		prerequisite = { focus = POR_ditadura_militar }
		icon = GFX_focus_generic_military_mission
		x = 0
		y = 1

		relative_position_id = POR_ditadura_militar
		cost = 5
		completion_reward = {
			add_ideas = POR_camisas_azuis
		}
		search_filters = {FOCUS_FILTER_WAR_SUPPORT}
	}

	focus = {
		id = POR_join_the_axis
		
		available = {
			is_in_faction = no
			is_puppet = no
			has_government = fascism
			any_other_country = {
				is_major = yes
				has_government = fascism
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
				has_opinion = {
					target = ROOT
					value > 0
				}					
			}
		}	

		prerequisite = { focus = POR_camisas_azuis }
		mutually_exclusive = { focus = POR_the_fifth_empire }
		icon = GFX_focus_chi_mission_to_germany
		x = -1
		y = 1

		relative_position_id = POR_camisas_azuis
		cost = 5
		completion_reward = {
			swap_ideas = {
				remove_idea = POR_national_syndicalism
				add_idea = POR_axis_syndicalism
			}
			if = {
				limit = {
					GER = {
						has_government = fascism
						is_faction_leader = yes
						has_capitulated = no
						NOT = { has_war_with = ROOT }
						exists = yes
					}
					NOT = {
						any_other_country = {
							is_in_faction_with = GER
							has_war_with = ROOT
						}
					}					
				}
				GER = {
					country_event = generic.2
				}
			}
			else = {
				get_best_alliance_match_fascism_effect = yes
				var:best_leader = {
					country_event = generic.2
				}
			}
			remove_ideas = POR_unstable_republic			
		}

		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = POR_research_agreements
		available = {
			is_in_faction_with = GER
		}
		prerequisite = { focus = POR_join_the_axis }
		icon = GFX_goal_generic_scientific_exchange
		x = -1
		y = 2

		relative_position_id = POR_join_the_axis
		cost = 5
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			GER = { add_to_tech_sharing_group = axis_research }
			add_to_tech_sharing_group = axis_research
			add_ideas = POR_german_research_influence
		}
	}

	focus = {
		id = POR_the_fifth_empire
		available = {
			has_government = fascism
		}
		prerequisite = { focus = POR_camisas_azuis }
		mutually_exclusive = { focus = POR_join_the_axis }
		icon = GFX_focus_por_the_fifth_empire
		x = 1
		y = 1

		relative_position_id = POR_camisas_azuis
		cost = 10 
		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			set_cosmetic_tag = POR_empire
			custom_effect_tooltip = POR_the_fifth_empire_tt
			swap_ideas = {
				remove_idea = POR_national_syndicalism
				add_idea = POR_the_fifth_empire
			}
			remove_ideas = POR_unstable_republic
			add_ideas = closed_economy
			every_other_country = {
				limit = {
					NOT = { is_puppet_of = ROOT }
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = POR_the_fifth_empire_has_threatening_ambitions
				}
			}
			if = {
				limit = {
					has_government = fascism
				}
				add_country_leader_trait = father_of_the_empire
			}
			hidden_effect = {
			112 = {
				set_state_flag = POR_fifth_empire_flag
				add_core_of = ROOT
			}
			180 = {
				set_state_flag = POR_fifth_empire_flag
				add_core_of = ROOT
			}
			181 = {
				set_state_flag = POR_fifth_empire_flag
				add_core_of = ROOT
			}
			171 = {
				set_state_flag = POR_fifth_empire_flag
				add_core_of = ROOT
			}
			795 = {
				set_state_flag = POR_fifth_empire_flag
				add_core_of = ROOT
			}
			179 = {
				set_state_flag = POR_fifth_empire_flag
				add_core_of = ROOT
			}
			169 = {
				set_state_flag = POR_fifth_empire_flag
				add_core_of = ROOT
			}
			170 = {
				set_state_flag = POR_fifth_empire_flag
				add_core_of = ROOT
			}
			788 = {
				set_state_flag = POR_fifth_empire_flag
				add_core_of = ROOT
			}
			174 = {
				set_state_flag = POR_fifth_empire_flag
				add_core_of = ROOT
			}
			790 = {
				set_state_flag = POR_fifth_empire_flag
				add_core_of = ROOT
			}
			118 = {
				set_state_flag = POR_fifth_empire_flag
				add_core_of = ROOT
			}
			702 = {
				set_state_flag = POR_fifth_empire_flag
				add_core_of = ROOT
			}
			}
		}
	}

	focus = {
		id = POR_expand_the_chinese_territories

		select_effect = {
			every_country = {
				limit = {
					OR = {
						controls_state = 592
						controls_state = 594
						controls_state = 325
						controls_state = 613
						controls_state = 622
						controls_state = 604
						controls_state = 615
						controls_state = 611
						controls_state = 328
					}
				}
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		available = {
			owns_state = 729
			has_army_manpower = {
				size > 249999
			}		
			has_civil_war = no			
		}
		prerequisite = { focus = POR_join_the_axis focus = POR_the_fifth_empire }
		icon = GFX_focus_usa_focus_on_asia
		x = -1
		y = 2

		relative_position_id = POR_the_fifth_empire
		cost = 5
		completion_reward = {
			hidden_effect = {
				592 = {
					owner =  {
						ROOT = {
							create_wargoal = {
							  	target = PREV
								expire = 0
							    type = annex_everything
							}
						}
					}
				}

				594 = {
					owner =  {
						ROOT = {
							if = {
								limit = {
									NOT = { has_wargoal_against = PREV }
								}
								create_wargoal = {
								  	target = PREV
									expire = 0
								    type = annex_everything
								}
							}
						}
					}
				}

				325 = {
					owner =  {
						ROOT = {
							if = {
								limit = {
									NOT = { has_wargoal_against = PREV }
								}
								create_wargoal = {
								  	target = PREV
									expire = 0
								    type = annex_everything
								}
							}
						}
					}
				}

				613 = {
					owner =  {
						ROOT = {
							if = {
								limit = {
									NOT = { has_wargoal_against = PREV }
								}
								create_wargoal = {
								  	target = PREV
									expire = 0
								    type = annex_everything
								}
							}
						}
					}
				}

				622 = {
					owner =  {
						ROOT = {
							if = {
								limit = {
									NOT = { has_wargoal_against = PREV }
								}
								create_wargoal = {
								  	target = PREV
									expire = 0
								    type = annex_everything
								}
							}
						}
					}
				}

				604 = {
					owner =  {
						ROOT = {
							if = {
								limit = {
									NOT = { has_wargoal_against = PREV }
								}
								create_wargoal = {
								  	target = PREV
									expire = 0
								    type = annex_everything
								}
							}
						}
					}
				}

				615 = {
					owner =  {
						ROOT = {
							if = {
								limit = {
									NOT = { has_wargoal_against = PREV }
								}
								create_wargoal = {
								  	target = PREV
									expire = 0
								    type = annex_everything
								}
							}
						}
					}
				}

				611 = {
					owner =  {
						ROOT = {
							if = {
								limit = {
									NOT = { has_wargoal_against = PREV }
								}
								create_wargoal = {
								  	target = PREV
									expire = 0
								    type = annex_everything
								}
							}
						}
					}
				}

				328 = {
					owner =  {
						ROOT = {
							if = {
								limit = {
									NOT = { has_wargoal_against = PREV }
								}
								create_wargoal = {
								  	target = PREV
									expire = 0
								    type = annex_everything
								}
							}
						}
					}
				}
			}
			custom_effect_tooltip = POR_expand_the_chinese_territories_tt

			hidden_effect = {
				random_country = {
					limit = { controls_state = 592 }
					ROOT = {
						add_ai_strategy = {
							type = prepare_for_war
							id = PREV
							value = 100
						}
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = POR_deal_with_the_japanese_threat

		will_lead_to_war_with = JAP

		select_effect = {
			add_ai_strategy = {
				type = prepare_for_war
				id = JAP
				value = 100
			}
		}

		available = {
			
			JAP = {
				exists = yes
				NOT = { is_in_faction_with = ROOT }
			}
		}
		prerequisite = { focus = POR_the_fifth_empire }
		prerequisite = { focus = POR_recover_the_east_indies }
		icon = GFX_focus_attack_japan
		x = 1
		y = 2

		relative_position_id = POR_the_fifth_empire
		cost = 5
		completion_reward = {
			create_wargoal = {
				target = JAP
				type = annex_everything
				expire = 0
			}

			hidden_effect = {
				add_ai_strategy = {
					type = declare_war
					id = JAP
					value = 100
				}
			}
		}
		search_filters = {  FOCUS_FILTER_MANPOWER }
	}
	focus = {
		id = POR_more_buildings

		prerequisite = { focus = POR_the_fifth_empire focus = POR_join_the_axis }
		icon = GFX_SOV_aristocratic_investments_ccp_2d_sov_compatibility
		x = 0
		y = 1

		relative_position_id = POR_the_fifth_empire
		cost = 10
		completion_reward = {
			add_political_power = -150
			custom_effect_tooltip = generic_skip_one_line_tt
			add_timed_idea = {
				idea = JAP_investment
				years = 1
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			every_controlled_state = {
				limit = {
					AND = {
						is_on_continent = europe
						is_core_of = POR
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = infrastructure 
					level = 1
				}
			} 
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = POR_steel_mine

		available = {
			
		}
		prerequisite = { focus = POR_the_fifth_empire focus = POR_join_the_axis }
		icon = GFX_focus_generic_steel
		x = -2
		y = 1

		relative_position_id = POR_the_fifth_empire
		cost = 10
		completion_reward = {
			add_political_power = -75
			custom_effect_tooltip = generic_skip_one_line_tt
			custom_effect_tooltip = POR_steel_mine_tt
			custom_effect_tooltip = generic_skip_one_line_tt
			add_timed_idea = {
				idea = JAP_investment
				months = 6
			}
			custom_effect_tooltip = generic_skip_one_line_tt
			every_controlled_state = {
				limit = {
					AND = {
						is_on_continent = europe
						is_core_of = POR
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = resource_expansion_steel
					level = 1
				}
			}	
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = POR_refuse_the_naval_blockade
		available = {
			has_equipment = {
			  convoy > 150
			}
			ENG = { has_war = yes}
			NOT = {
				is_in_faction_with = ENG
			}
		}
		offset = {
			x = -13
			y= 0
			trigger = {
				has_completed_focus = POR_a_royal_wedding
			}
		}
		bypass = {
			ENG = {
				OR = {
					exists = no
					has_capitulated = yes
					has_war_with = ROOT
				}
			}
		}
		prerequisite = { focus = POR_national_syndicalism focus = POR_the_return_of_duarte }

		icon = GFX_goal_generic_navy_anti_submarine
		x = 3
		y = 1

		relative_position_id = POR_national_syndicalism
		cost = 5
		completion_reward = {
			every_other_country = {
				limit = {
					has_war_with = ENG
				}

				country_event = {
					id = lar_portugal_naval_blockade.1
				}
			}
			ENG = {
				country_event = {
					id = lar_portugal_naval_blockade.3
				}
				remove_opinion_modifier = {
					target = POR
					modifier = POR_anglo_portuguese_alliance
				}
			}
			remove_opinion_modifier = {
					target = ENG
					modifier = POR_anglo_portuguese_alliance
			}
		}
		search_filters = {  FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = POR_mapa_cor_de_rosa

		select_effect = {
			every_country = {
				limit = {
					OR = {
						controls_state = 770
						controls_state = 545
						controls_state = 771
					}
				}
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		available = {
		}

		bypass = {
			AND = {
				owns_state = 770
				owns_state = 545
				owns_state = 771
			}
		}
		prerequisite = { focus = POR_refuse_the_naval_blockade }
		icon = GFX_focus_por_the_pink_map
		x = 0
		y = 1

		relative_position_id = POR_refuse_the_naval_blockade
		cost = 5
		completion_reward = {
			add_state_claim = 770 #Malawi
			add_state_claim = 545 #Rhodesia
			add_state_claim = 771 #Zambia

			hidden_effect = {
				random_country = {
					limit = {
						OR = {
							controls_state = 770
							controls_state = 545
							controls_state = 771
						}
					}
					ROOT = {
						add_ai_strategy = {
							type = declare_war
							id = PREV
							value = 100
						}
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MANPOWER }
	}

	focus = {
		id = POR_recover_the_east_indies

		select_effect = {
			random_country = {
				limit = { controls_state = 336 }
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
			random_country = {
				limit = { controls_state = 667 }
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		available = {
			has_army_manpower = {
				size > 149999
			}		
			has_civil_war = no			
		}

		bypass = {
			owns_state = 336
			owns_state = 667
		}
		prerequisite = { focus = POR_mapa_cor_de_rosa }
		icon = GFX_focus_RAJ_seek_help_from_germany
		x = 0
		y = 1

		relative_position_id = POR_mapa_cor_de_rosa
		cost = 5
		completion_reward = {
			add_state_claim = 336 # Singapore
			add_state_claim = 667 # Lesser Sunda

			hidden_effect = {
				random_country = {
					limit = { controls_state = 336 }
					ROOT = {
						add_ai_strategy = {
							type = declare_war
							id = PREV
							value = 100
						}
					}
				}
				random_country = {
					limit = { controls_state = 667 }
					ROOT = {
						add_ai_strategy = {
							type = declare_war
							id = PREV
							value = 100
						}
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT }
	}

	focus = {
		id = POR_recover_brazil

		will_lead_to_war_with = BRA

		select_effect = {
			random_country = {
				limit = { controls_state = 500 }
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		available = {
			has_army_manpower = {
				size > 249999
			}		
			has_civil_war = no			
		}

		bypass = {
			owns_state = 500
		}
		prerequisite = { focus = POR_mapa_cor_de_rosa focus = POR_train_our_generals_for_the_fight }

		mutually_exclusive = { focus = POR_the_kingdom_reunited focus = POR_luso_monarchist_cooperation }

		icon = GFX_focus_por_recover_brazil
		x = 1
		y = 2

		relative_position_id = POR_mapa_cor_de_rosa
		cost = 5
		completion_reward = {
			add_war_support = 0.05
			add_state_claim = 500 #Rio
			create_wargoal = {
				target = BRA
				type = annex_everything
			}
			USA = {
				diplomatic_relation = { country = BRA relation = guarantee active = no }
			}


			hidden_effect = {
				random_country = {
					limit = { controls_state = 500 }
					ROOT = {
						add_ai_strategy = {
							type = declare_war
							id = PREV
							value = 100
						}
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = POR_a_royal_wedding
		prerequisite = { focus = POR_estado_novo }

		mutually_exclusive = { focus = POR_support_the_spanish_nationalists focus = POR_strict_neutrality_in_the_spanish_civil_war focus = POR_support_the_spanish_republic }

		icon = GFX_focus_generic_royal_wedding
		x = 13
		y = 0
		allow_branch = {
			NOT = {
				OR = {
					has_completed_focus = POR_popular_front
					has_completed_focus = POR_strict_neutrality_in_the_spanish_civil_war
					has_completed_focus = POR_support_the_spanish_nationalists
				}
			}
		}
		offset = {
			x = -13
			y = 0 
			trigger = {
				has_completed_focus = POR_a_royal_wedding
			}
		}
		ai_will_do = {
			factor = 0.2
			modifier = {
				factor = 0
				BRA = {
					is_ai = no 
				}
			}
			modifier = {
				add = 1
				AND = {	
					has_global_flag = rt56_old_school
					BRA = {
						is_ai = yes
					}
				}
			}
		}

		relative_position_id = POR_support_the_spanish_nationalists
		cost = 10
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_stability = 0.05
			mark_focus_tree_layout_dirty = yes
			hidden_effect = {
				news_event = { id = lar_news.25 days = 3 random_days = 5 }
			}
			add_political_power = 150
			unlock_decision_tooltip = POR_stir_monarchist_sentiment_in_brazil
			unlock_decision_tooltip = POR_stir_monarchist_sentiment_in_portugal
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = POR_joao_de_azevedo_coutinho
			show_ideas_tooltip = POR_joao_francisco_de_barbosa_azevedo
		}
	}

	focus = {
		id = POR_the_return_of_duarte
		prerequisite = { focus = POR_a_royal_wedding }
		icon = GFX_focus_generic_monarchy_1
		x = 0
		y = 2

		relative_position_id = POR_a_royal_wedding
		cost = 10
		completion_reward = {
			set_party_name = {
			    ideology = neutrality
			    long_name = POR_monarchy_party_long
			    name = POR_monarchy_party
			}
			add_popularity = {
			    ideology = neutrality
			    popularity = 0.15
			}
			add_popularity = {
			    ideology = democratic
			    popularity = -0.05
			}
			add_popularity = {
			    ideology = fascism
			    popularity = -0.05
			}
			add_popularity = {
			    ideology = communism
			    popularity = -0.05
			}
			add_stability = -0.10
		}
		search_filters = { FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = POR_restore_the_navy

		mutually_exclusive = {
			focus = POR_monarchist_uprising_in_brazil
		}
		prerequisite = { focus = POR_the_return_of_duarte 
		focus = POR_national_syndicalism }
		icon = GFX_goal_generic_navy_battleship
		x = -4
		y = 1

		relative_position_id = POR_the_return_of_duarte
		cost = 5
		completion_reward = {
			BRA = {
				add_opinion_modifier = {
					target = ROOT
					modifier = hostile_status
				}
			}
			add_war_support = 0.05
			add_political_power = 100
			set_technology = {
				basic_light_battery = 1
				basic_medium_battery = 1
				basic_heavy_battery = 1
				basic_fire_control_system = 1
				basic_cruiser_armor_scheme = 1
				basic_depth_charges = 1
				basic_heavy_shell = 1
			    basic_ship_hull_heavy = 1
				basic_ship_hull_cruiser = 1
				marines = 1
			}
			division_template = {
				name = "Fuzileiros"
				regiments = { 
					marine = { x = 0 y = 0 }
					marine = { x = 0 y = 1 }
					marine = { x = 0 y = 2 }
					marine = { x = 0 y = 3 }
					marine = { x = 0 y = 4 }
					marine = { x = 0 y = 4 }
					marine = { x = 1 y = 0 }
					marine = { x = 1 y = 1 }
					artillery_brigade = { x = 1 y = 2 }
					artillery_brigade = { x = 1 y = 3 }
				}
				support = {
					engineer = { x = 0 y = 0 }
					artillery = { x = 0 y = 1 }
				}
			}
			702 = {
				add_building_construction = {
    				type = naval_base
   					level = 2
   					instant_build = yes
   					province = 13014
				}
				add_building_construction = {
  					type = air_base
    				level = 1
    				instant_build = yes
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
				}
				add_core_of = POR
				create_unit = {
					division = "name = \"Fuzileiros\" division_template = \"Fuzileiros\" start_experience_factor = 0.8 start_equipment_factor = 0.7" 
					owner = POR
				}
			}
			create_equipment_variant = {
				name = "Rio De Janeiro"
				allow_without_tech = yes
				type = ship_hull_heavy_1
				name_group = POR_BB_HISTORICAL
				parent_version = 0
				modules = {
					fixed_ship_battery_slot = ship_heavy_battery_1
					fixed_ship_anti_air_slot = ship_anti_air_1
					fixed_ship_fire_control_system_slot = ship_fire_control_system_1
					fixed_ship_radar_slot = empty
					fixed_ship_engine_slot = heavy_ship_engine_2
					fixed_ship_secondaries_slot = ship_secondaries_1
					fixed_ship_armor_slot = ship_armor_bb_1
					front_1_custom_slot = ship_anti_air_1
					mid_1_custom_slot = ship_anti_air_1
					mid_2_custom_slot = ship_secondaries_1
					rear_1_custom_slot = ship_heavy_battery_1
				}
			}
			add_equipment_production = {
				equipment = {
					type = ship_hull_heavy_1
					creator = "POR" 
					version_name = "Rio De Janeiro"
				}
				name = "Cabral" 
				requested_factories = 1
				progress = 0.75
				amount = 1
			}
			POR_jose_mendes_cabecadas = {
				add_unit_leader_trait = bold
				add_unit_leader_trait = spotter
			}
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}
	
	focus = {
		id = POR_train_our_generals_for_the_fight

		available = {
		}
		#allow_branch = {
		#	always = no
		#}

		prerequisite = { focus = POR_restore_the_navy }
		icon = GFX_focus_generic_military_academy
		x = 0
		y = 1
		relative_position_id = POR_restore_the_navy
		cost = 5
		available = {
			has_war_with = BRA
		}
		completion_reward = {
			add_war_support = 0.05
			POR_luis_augusto_ferreira_martins = {
				add_unit_leader_trait = hill_fighter
			}
			POR_raul_augusto_esteves = {
				add_unit_leader_trait = naval_invader
			}
		}
	}
	focus = {
		id = POR_support_a_spanish_monarchy_in_the_war

		available = {
			SPR_scw_in_progress = yes
			country_exists = SPB
			NOT = { has_war_with = SPB }
		}

		bypass = {
			has_global_flag = scw_over
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_SPA_CIVIL_WAR }

		prerequisite = { focus = POR_the_return_of_duarte }
		icon = GFX_focus_spa_supremacy_of_the_communion
		x = 3
		y = 1

		relative_position_id = POR_the_return_of_duarte
		cost = 5
		completion_reward = {
			SPB = {
				add_opinion_modifier = {
				    target = POR
				    modifier = POR_helped_in_civil_war
				}
				add_manpower = 10000
			}
			add_ideas = POR_volunteers_in_the_war_carlist
			add_manpower = -10000
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 2000
				}
			}
			send_equipment = {
			    equipment = infantry_equipment
			    amount = 2000
			    target = SPB
			}
			set_rule = { can_send_volunteers = yes }
		}
		search_filters = { FOCUS_FILTER_POLITICAL }
	}

	focus = {
		id = POR_assist_the_requetes
		available = {
			SPR_scw_in_progress = yes
			country_exists = SPB
			NOT = { has_war_with = SPB }
		}

		bypass = {
			has_global_flag = scw_over
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_SPA_CIVIL_WAR }
		prerequisite = { focus = POR_support_a_spanish_monarchy_in_the_war }
		icon = GFX_goal_generic_military_deal
		x = 0
		y = 1

		relative_position_id = POR_support_a_spanish_monarchy_in_the_war
		cost = 5
		completion_reward = {
			add_tech_bonus = {
				name = POR_assist_the_requetes
			    bonus = 1.0
			    uses = 1
			    category = mountaineers_tech
			}
			add_doctrine_cost_reduction = {
				name = POR_assist_the_requetes
				cost_reduction = 0.5
			    uses = 1
			    category = air_doctrine
			}
			add_doctrine_cost_reduction = {
				name = POR_assist_the_requetes
			    cost_reduction = 0.5
			    uses = 1
			    category = land_doctrine
			}
			army_experience = 25
			air_experience = 25

			hidden_effect = {
				add_ai_strategy = {
					type = befriend
					id = SPB
					value = 100
				}
				SPB = {
					add_ai_strategy = {
						type = befriend
						id = ROOT
						value = 100
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_RESEARCH }
	}

	focus = {
		id = POR_join_the_carlist_fight

		select_effect = {
			if = {
				limit = {
					country_exists = SPA
					is_neighbor_of = SPA
				}
				add_ai_strategy = {
					type = prepare_for_war
					id = SPA
					value = 100
				}
			}
			if = {
				limit = {
					country_exists = SPD
					is_neighbor_of = SPD
				}
				add_ai_strategy = {
					type = prepare_for_war
					id = SPD
					value = 100
				}
			}
			if = {
				limit = {
					country_exists = SPC
					is_neighbor_of = SPC
				}
				add_ai_strategy = {
					type = prepare_for_war
					id = SPC
					value = 100
				}
			}
		}

		available = {
			has_civil_war = no
			SPR_scw_in_progress = yes
			country_exists = SPB
			NOT = { has_war_with = SPB }
			is_puppet = no
		}
		bypass = {
			has_global_flag = scw_over
		}
		search_filters = { FOCUS_FILTER_RESEARCH FOCUS_FILTER_SPA_CIVIL_WAR }
		prerequisite = { focus = POR_assist_the_requetes }
		icon = GFX_focus_spa_no_compromise_on_carlist_ideals
		x = 0
		y = 1

		relative_position_id = POR_assist_the_requetes
		cost = 5
		completion_reward = {
			unlock_decision_tooltip = POR_fight_alongside_the_carlists
			if = {
				limit = { country_exists = SPA }
				SPA = {
					country_event = { id = lar_portugal_spanish_civil_war.3 }
				}
			}
			if = {
				limit = { country_exists = SPD }
				SPD = {
					country_event = { id = lar_portugal_spanish_civil_war.3 }
				}
			}
			if = {
				limit = { country_exists = SPC }
				SPC = {
					country_event = { id = lar_portugal_spanish_civil_war.3 }
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = POR_the_royal_iberian_alliance
		available = {
			is_in_faction = no
			has_country_leader = { name = "Dom Duarte Nuno" }
			has_global_flag = scw_over
			has_completed_focus = POR_restoration_of_the_monarchy
			country_exists = SPB
			NOT = { has_war_with = SPB }
			SPB = { has_completed_focus = SPA_restore_the_monarchy }
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 100
				has_idea = POR_volunteers_in_the_war_carlist
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = SPB
					value > 30
				}
			}
		}
		prerequisite = { focus = POR_join_the_carlist_fight }
		mutually_exclusive = { focus = POR_remember_olivenca }
		icon = GFX_goal_tfv_strengthen_commonwealth_ties
		x = 0
		y = 1

		relative_position_id = POR_join_the_carlist_fight
		cost = 5
		completion_reward = {
			SPB = {
				country_event = { id = lar_portugal_royal_iberian_alliance.1 hours = 6 }
			}
		}
	}

	focus = {
		id = POR_promote_the_monarchist_cause_in_portugal
		prerequisite = { focus = POR_the_return_of_duarte }
		icon = GFX_focus_generic_monarchy_2
		x = 0
		y = 1
		relative_position_id = POR_the_return_of_duarte
		cost = 10
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			add_timed_idea = {
			    idea = POR_monarchists_on_the_rise2
			    days = 730
			}
		}
	}

	focus = {
		id = POR_monarchist_uprising_in_brazil
		available = { 
			BRA = { 
			is_ai = yes
		}
		}

		bypass = {
			OR = {
				NOT = { country_exists = BRA }
				BRA = {
					OR = {
						has_country_leader = { name = "Pedro III" ruling_only = yes }
						has_capitulated = yes 
					} 	
				}
			}
		}
		mutually_exclusive = {
			focus = POR_restore_the_navy
		}
		prerequisite = { focus = POR_the_return_of_duarte }
		icon = GFX_focus_por_reclaim_crown_jewel
		x = -2
		y = 1

		relative_position_id = POR_the_return_of_duarte
		cost = 10
		completion_reward = {
			BRA = {
				country_event = lar_portugal_promote_monarchist_cause.7
				effect_tooltip = {
					add_timed_idea = {
						idea = POR_monarchists_on_the_rise
						days = 730
					}
					set_party_name = { 
						ideology = neutrality
						long_name = BRA_monarchy_party_long
						name = BRA_monarchy_party
					}
					set_party_name = { 
						ideology = fascism
						long_name = BRA_antimonarchist_coalition_long
						name = BRA_antimonarchist_coalition
					}
					if = {
						limit = {
							OR = {
								has_government = neutrality
								has_government = democratic
								has_government = communism
							} 
						}
						add_popularity = {
							ideology = fascism
							popularity = 0.8
						}
						set_politics = {
							ruling_party = fascism
						}
					}
					hidden_effect = {
						retire_country_leader = yes
					}

					BRA_getulio_vargas = {
						remove_country_leader_role = {
							ideology = despotism
						}
						add_country_leader_role = {
							country_leader = {
								expire = "1954.8.24"
								ideology = fascism_ideology
								traits = {
									anti_communist
								}
							}
							promote_leader = yes
						}
					}
					promote_character = BRA_arlindo_veiga_dos_santos
				}
			}			
		}
	}
	focus = {
		id = POR_the_empire_of_brazil

		select_effect = {
			if = {
				limit = {
					has_war = no
				}
				add_ai_strategy = {
					type = prepare_for_war
					id = BRA
					value = 100
				}
			}
		}

		available = {
			BRA = {
				neutrality > 0.10
			}
			is_puppet = no
			if = {
				limit = {
					BRA = {
						has_country_leader = { name = "Pedro III" ruling_only = yes }
					}					
				}
				has_country_leader = { name = "Dom Duarte Nuno" ruling_only = yes }
			}			
		}

		bypass = {
			OR = {
				NOT = { country_exists = BRA }
				BRA = { has_capitulated = yes }
				is_in_faction_with = BRA
				BRA = {
					has_country_leader = { name = "Pedro III" ruling_only = no }
				}
			}
		}
		relative_position_id = POR_monarchist_uprising_in_brazil
		prerequisite = { focus = POR_monarchist_uprising_in_brazil }
		icon = GFX_focus_CHL_a_new_empire_of_brazil
		x = 0
		y = 1

		cost = 10
		completion_reward = {
			if = {
				limit = {
					BRA = {
						has_country_leader = { name = "Pedro III" ruling_only = yes }
						is_in_faction = yes
					}

				}
				BRA = {
					FACTION_LEADER = {
						country_event = { id = generic.2 }	
					}
				}
				
				remove_ideas = POR_unstable_monarchy

			}
			if = {
				limit = {
					BRA = {
						has_country_leader = { name = "Pedro III" ruling_only = yes }
						is_in_faction = no
					}
				}
				set_rule = { can_create_factions = yes }
				create_faction = POR_lisbon_pact

				BRA = {
					country_event = { id = generic.5 }
					add_ai_strategy = {
						type = alliance
						id = "POR"
						value = 200
					}						
				}				
				remove_ideas = POR_unstable_monarchy

			}
			else = {
				if = {
					limit = {
						BRA = {
							OR = {
								has_country_flag = POR_brazil_supports_fascist_coalition_flag
								AND = {
									NOT = { has_government = neutrality }
									OR = {
										has_stability < 0.5
										neutrality < 0.7
									}
								}
							}
						}
					}
					BRA = { country_event = lar_portugal_promote_monarchist_cause.3 }
				}
				else = {
					BRA = { country_event = lar_portugal_promote_monarchist_cause.4 }
				}
				custom_effect_tooltip = POR_the_empire_of_brazil_potential_civil_war_tt
	
				hidden_effect = {
					every_country = {
						limit = {
							original_tag = BRA
							has_government = neutrality
						}
						add_ai_strategy = {
							type = befriend
							id = ROOT
							value = 100
						}
						ROOT = {
							add_ai_strategy = {
								type = befriend
								id = PREV
								value = 100
							}
						}
					}
				}
			}			
		}
	}

	focus = {
		id = POR_restoration_of_the_monarchy
		available = {
			has_government = neutrality
		}
		prerequisite = { focus = POR_promote_the_monarchist_cause_in_portugal }
		icon = GFX_focus_rom_royal_dictatorship
		x = 0
		y = 1

		relative_position_id = POR_promote_the_monarchist_cause_in_portugal
		cost = 10
		completion_reward = {
			remove_ideas = POR_estado_novo
			swap_ideas = {
				remove_idea = POR_unstable_republic
				add_idea = POR_unstable_monarchy
			}
			if = { #Low Stability triggers a Civil War
				limit = {
					has_stability < 0.4
					is_ai = no
				}
				set_temp_variable = { POR_monarchist_cw_opposition = party_popularity@fascism }
				add_to_temp_variable = { POR_monarchist_cw_opposition = party_popularity@communism }
				add_to_temp_variable = { POR_monarchist_cw_opposition = party_popularity@democratic }
				start_civil_war = {
					ideology = fascism
					size = POR_monarchist_cw_opposition
					capital = 180
					states = { 181 }
				}
				if = {
					limit = {
						OR = {
							540 = {
								is_core_of = POR
							}
							544 = {
								is_core_of = POR
							}							
						}
					}
					add_ideas = POR_civil_war_surrender_debuff
				}				
			}
			#Civil war suddenly easier for the AI, should allow a restoration as currently they fail every single time.
			if = { #Low Stability triggers a Civil War
				limit = {
					has_stability < 0.4
					is_ai = yes
				}
				set_temp_variable = { POR_monarchist_cw_opposition = party_popularity@fascism }
				add_to_temp_variable = { POR_monarchist_cw_opposition = party_popularity@communism }
				#add_to_temp_variable = { POR_monarchist_cw_opposition = party_popularity@democratic }
				start_civil_war = {
					ideology = fascism
					size = POR_monarchist_cw_opposition
					capital = 180
					states = { 181 }
				}
				if = {
					limit = {
						OR = {
							540 = {
								is_core_of = POR
							}
							544 = {
								is_core_of = POR
							}							
						}
					}
					add_ideas = POR_civil_war_surrender_debuff
				}				
			}			
			else = {
				add_stability = -0.1
			}
			set_country_flag = KOP_kingdom_of_portugal_flag
			set_cosmetic_tag = KOP_kingdom_portugal
			create_country_leader = {
				name = "Dom Duarte Nuno"
				desc = "POLITICS_DOM_DUARTE_NUNO_DESC"
				picture = "gfx/leaders/POR/portrait_por_duarte_nuno.dds"
				expire = "1976.12.24"
				ideology = despotism
				traits = {
					constitutional_monarch_minor
				}
			}
			create_corps_commander = {
				name = "Jo√£o de Almeida"
				portrait_path = "gfx/leaders/POR/r56_portrait_POR_Joao_de_Almeida.dds"
				traits = {
					war_hero
					politically_connected
					career_officer
					organizer
				}
				skill = 2
				attack_skill = 1
				defense_skill = 3
				planning_skill = 2
				logistics_skill = 1
			}

			custom_effect_tooltip = POR_potential_civil_war_low_requirement_tt
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY }
	}

	focus = {
		id = POR_the_kingdom_reunited
		available = {
			has_government = neutrality
			OR = {
				AND = {
					country_exists = BRA
					BRA = {
						has_government = neutrality
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
					NOT = {
						any_enemy_country = {
							is_in_faction_with = BRA
						}
					}
				}
				AND = {
					NOT = { country_exists = BRA }
					owns_state = 500
				}
				AND = {
					has_completed_focus = POR_reconquest_of_brazil
					BRA = {
						exists = no
					}
					has_full_control_of_state = 500
				}
			}
		}
		prerequisite = { focus = POR_restoration_of_the_monarchy }
		prerequisite = { focus = POR_the_empire_of_brazil focus = POR_train_our_generals_for_the_fight }

		mutually_exclusive = { focus = POR_recover_brazil focus = POR_luso_monarchist_cooperation }

		icon = GFX_focus_por_the_kingdom_reunited
		x = -1
		y = 2

		relative_position_id = POR_the_empire_of_brazil
		cost = 10
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_INDUSTRY FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_ANNEXATION}
		completion_reward = {
			remove_ideas = POR_unstable_monarchy
			add_ideas = POR_the_portuguese_empire
			if = {
				limit = {
					BRA = {
						exists = no
					}
				}
				every_state = {
					limit = {
						is_core_of = BRA
					}
					add_core_of = POR
				}
			}
			if = {
				limit = {
					country_exists = BRA
				}
				BRA = {
					country_event = { id = lar_portugal_promote_monarchist_cause.2 hours = 6 }
				}
			}
			set_rule = { can_create_factions = yes }
		}
	}
	focus = {
		id = POR_luso_monarchist_cooperation
		available = {
			is_in_faction_with = BRA
		}
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 50
				has_idea = POR_unstable_monarchy
			}
		}

		prerequisite = { focus = POR_restoration_of_the_monarchy }
		prerequisite = { focus = POR_the_empire_of_brazil }
		mutually_exclusive = { focus = POR_the_kingdom_reunited focus = POR_recover_brazil }
		icon = GFX_goal_tfv_strengthen_commonwealth_ties
		x = -1
		y = 2

		relative_position_id = POR_restoration_of_the_monarchy
		cost = 10
		completion_reward = {
			if = {
				limit = {
					has_idea = POR_unstable_monarchy
				}
				remove_ideas = POR_unstable_monarchy
			}
			add_stability = 0.05
			add_ideas = POR_luso_monarchist_cooperation
			BRA = {
				add_stability = 0.05
				add_ideas = POR_luso_monarchist_cooperation
			}
			remove_ideas = POR_unstable_monarchy
		}
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT }
	}
	focus = {
		id = POR_luso_imperial_and_royal_armies
		available = {
			is_in_faction_with = BRA
			NOT = {
				has_idea = POR_unreliable_army
			}
		}

		ai_will_do = {
			factor = 5

		}

		prerequisite = { focus = POR_luso_monarchist_cooperation }
		
		icon = GFX_focus_generic_military_academy
		x = 0
		y = 1

		relative_position_id = POR_luso_monarchist_cooperation
		cost = 10
		completion_reward = {
			add_ideas = POR_luso_monarchist_military_cooperation
			every_army_leader = {
				add_planning = 1
			}
			every_navy_leader = {
				add_coordination = 1
			}
			BRA = {
				add_ideas = POR_luso_monarchist_military_cooperation
				every_army_leader = {
					add_planning = 1
				}
				every_navy_leader = {
					add_coordination = 1
				}				
			}

		}
		search_filters = { FOCUS_FILTER_MANPOWER FOCUS_FILTER_WAR_SUPPORT }
	}	
	focus = {
		id = POR_remember_olivenca
		available = {
		}

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 10
				has_opinion = {
					target = SPB
					value < 0
				}
			}
			modifier = {
				factor = 2
				has_government = neutrality
				SPB = { NOT = { has_government = neutrality } }
			}
		}

		bypass = {
			owns_state = 171
			owns_state = 290
		}
		prerequisite = { focus = POR_restoration_of_the_monarchy }
		mutually_exclusive = { focus = POR_the_royal_iberian_alliance }
		icon = GFX_focus_por_remember_olivenca
		x = 1
		y = 2

		relative_position_id = POR_restoration_of_the_monarchy
		cost = 5
		completion_reward = {
			add_state_claim = 171
			add_state_claim = 290

			hidden_effect = {
				random_country = {
					limit = { controls_state = 171 }
					ROOT = {
						add_ai_strategy = {
							type = prepare_for_war
							id = PREV
							value = 100
						}
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = POR_deal_with_fascism

		select_effect = {
			random_country = {
				limit = {
					has_government = fascism
					NOT = { is_in_faction_with = ROOT }
					OR = {
						is_major = yes
						is_neighbor_of = ROOT
					}
				}
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		available = {
			any_country = {
				has_government = fascism
				NOT = { is_in_faction_with = ROOT }
				OR = {
					is_major = yes
					is_neighbor_of = ROOT
				}
			}
			has_army_manpower = {
				size > 249999
			}		
			has_civil_war = no			
		}

		prerequisite = { focus = POR_remember_olivenca focus = POR_the_royal_iberian_alliance }
		icon = GFX_focus_attack_germany
		x = 1
		y = 1

		relative_position_id = POR_remember_olivenca

		cost = 5
		completion_reward = {
			hidden_effect = {
				every_country = {
					limit = {
						has_government = fascism
						NOT = { is_in_faction_with = ROOT }
						OR = {
							is_major = yes
							is_neighbor_of = ROOT
						}
					}
					ROOT = {
						create_wargoal = {
							target = PREV
							type = annex_everything
							expire = 0
						}
					}
				}
			}
			custom_effect_tooltip = POR_deal_with_fascism_tt
			every_country = { #TOOLTIP Support
				limit = {
					has_government = fascism
					NOT = { is_in_faction_with = ROOT }
					OR = {
						is_major = yes
						is_neighbor_of = ROOT
					}
				}
			}

			hidden_effect = {
				random_country = {
					limit = {
						has_government = fascism
						NOT = { is_in_faction_with = ROOT }
						OR = {
							is_major = yes
							is_neighbor_of = ROOT
						}
					}
					ROOT = {
						add_ai_strategy = {
							type = declare_war
							id = PREV
							value = 100
						}
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = POR_latin_america

		will_lead_to_war_with = PAR
		will_lead_to_war_with = URG
		will_lead_to_war_with = ARG

		select_effect = {
			random_country = {
				limit = { controls_state = 300 }
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
			random_country = {
				limit = { controls_state = 301 }
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
			random_country = {
				limit = { controls_state = 510 }
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}

		bypass = {
			OR = {
				AND = {
					owns_state = 300
					owns_state = 301
					owns_state = 510
				}
				BRA = {
					is_in_faction_with = ROOT
					owns_state = 300
					owns_state = 301
					owns_state = 510					
				}
			}
		}
		prerequisite = { focus = POR_the_kingdom_reunited focus = POR_recover_brazil }
		icon = GFX_focus_por_recover_latin_america
		x = -1
		y = 1

		relative_position_id = POR_the_kingdom_reunited
		cost = 5
		completion_reward = {
			if = {
				limit = {
					BRA = {
						is_in_faction_with = ROOT
					}
				}
				BRA = {
					add_state_claim = 300
					add_state_claim = 301
					add_state_claim = 510
				}

			}
			else = {
				add_state_claim = 300
				add_state_claim = 301
				add_state_claim = 510
			}
			
			#As much as it would be cool to see them press their claim it's a receipe for disaster.
			#hidden_effect = {
			#	random_country = {
			#		limit = { controls_state = 300 }
			#		ROOT = {
			#			add_ai_strategy = {
			#				type = declare_war
			#				id = PREV
			#				value = 100
			#			}
			#		}
			#	}
			#	random_country = {
			#		limit = { controls_state = 301 }
			#		ROOT = {
			#			add_ai_strategy = {
			#				type = declare_war
			#				id = PREV
			#				value = 100
			#			}
			#		}
			#	}
			#	random_country = {
			#		limit = { controls_state = 510 }
			#		ROOT = {
			#			add_ai_strategy = {
			#				type = declare_war
			#				id = PREV
			#				value = 100
			#			}
			#		}
			#	}
			#}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}

	focus = {
		id = POR_the_communist_threat

		select_effect = {
			every_country = {
				limit = {
					has_government = communism
					NOT = { is_in_faction_with = ROOT }
					OR = {
						is_major = yes
						is_neighbor_of = ROOT
					}
				}
				ROOT = {
					add_ai_strategy = {
						type = prepare_for_war
						id = PREV
						value = 100
					}
				}
			}
		}
		offset = {
			x = 7
			y = 0 
			trigger = {
				has_completed_focus = POR_a_royal_wedding 
			}
		}
		available = {
			any_country = {
				has_government = communism
				NOT = { is_in_faction_with = ROOT }
				OR = {
					is_major = yes
					is_neighbor_of = ROOT
				}
			}
			has_army_manpower = {
				size > 249999
			}		
			has_civil_war = no				
		}
		prerequisite = { focus = POR_latin_america focus = POR_proudly_alone }

		icon = GFX_focus_ger_great_red_menace
		x = -8
		y = 1

		relative_position_id = POR_latin_america
		cost = 5
		completion_reward = {
			hidden_effect = {
				every_country = {
					limit = {
						has_government = communism
						NOT = { is_in_faction_with = ROOT }
						OR = {
							is_major = yes
							is_neighbor_of = ROOT
						}
					}
					if = {
						limit = {
							ROOT = { has_cosmetic_tag = KPB_kingdom_portugal_and_brazil } #Non-Aligned Duarte Nuno (Monarchist)
						}
						ROOT = {
							create_wargoal = {
								target = PREV
								type = puppet_wargoal_focus
								expire = 0
							}
						}
					}
					else_if = {
						limit = {
							ROOT = { has_government = neutrality }  #Non-Aligned Salazar (Even in Monarchist branch if Duarte Nuno is not ruler yet)
						}
							ROOT = {
								create_wargoal = {
									target = PREV
									type = topple_government
									expire = 0
								}
							}
					}
					else = { #Fascist Preto
						ROOT = {
							create_wargoal = {
								target = PREV
								type = annex_everything
								expire = 0
							}
						}
					}
				}
			}
			custom_effect_tooltip = POR_the_communist_threat_tt
			every_country = {
				limit = {
					has_government = communism
					NOT = { is_in_faction_with = ROOT }
					OR = {
						is_major = yes
						is_neighbor_of = ROOT
					}
				}
			}

			hidden_effect = {
				every_country = {
					limit = {
						has_government = communism
						NOT = { is_in_faction_with = ROOT }
						OR = {
							is_major = yes
							is_neighbor_of = ROOT
						}
					}
					ROOT = {
						add_ai_strategy = {
							type = declare_war
							id = PREV
							value = 100
						}
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_ANNEXATION }
	}
}